# Odelle NYSE - Data Models Architecture

## Overview

This document defines the data models needed to support the self-actualization tracking system. Following MVVM architecture with Riverpod state management, we define models first, then repositories/view models, then UI.

> **Architecture Reference:** See [ARCHITECTURE.md](ARCHITECTURE.md) for implementation patterns using Riverpod providers, ConsumerWidget patterns, and the complete layer architecture.

**Data Entry Methods:**
1. **Manual Entry** - User taps buttons, fills forms
2. **Voice/AI Entry** - Transcription parsed by AI to extract structured data
3. **Automatic** - Device sensors, time-based triggers

---

## UI-Driven Model Requirements

Based on the reference UI designs, here's what data we need to display:

### From Meditation/Wellness Apps

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SESSION DETAIL SCREEN                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚     â”‚                     â–¶ (play button)                          â”‚                â”‚
â”‚     â”‚                                                              â”‚                â”‚
â”‚     â”‚                   Sleep Meditation                           â”‚                â”‚
â”‚     â”‚                   â± 60min 30sec                              â”‚                â”‚
â”‚     â”‚                                                              â”‚                â”‚
â”‚     â”‚   "This beginner-friendly session helps you calm your        â”‚                â”‚
â”‚     â”‚    thoughts and focus on your breath, great for              â”‚                â”‚
â”‚     â”‚    starting your day"                                        â”‚                â”‚
â”‚     â”‚                                                              â”‚                â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                                      â”‚
â”‚     All Sessions                                         View all                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚     â”‚ â–¶  Basic Meditation 01                      â± 10min 30sec â”‚                 â”‚
â”‚     â”‚    A basic meditation to help you get started               â”‚                 â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚     â”‚ â–¶  Basic Meditation 02                      â± 10min 30sec â”‚                 â”‚
â”‚     â”‚    A basic meditation to help you get started               â”‚                 â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚     â”‚ â–¶  Basic Meditation 03                      â± 10min 30sec â”‚                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - Session: title, duration, description, thumbnail, audioUrl, category             â”‚
â”‚  - SessionCategory: name, icon, color                                               â”‚
â”‚  - Instructor: name, title, avatar                                                  â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROGRESS SCREEN                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     Your Progress                                              âœï¸ Add Now           â”‚
â”‚                                                                                      â”‚
â”‚     This Week Average                                                               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚ ğŸ”¥ Streak       â”‚ â”‚      Meditated Time                  â”‚                   â”‚
â”‚     â”‚ 5-day streak    â”‚ â”‚      3 hrs 45 mins                   â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚ ğŸ“Š Total        â”‚ â”‚      Average Session                 â”‚                   â”‚
â”‚     â”‚ Sessions        â”‚ â”‚      Length                          â”‚                   â”‚
â”‚     â”‚ Completed       â”‚ â”‚                                      â”‚                   â”‚
â”‚     â”‚ 22 sessions     â”‚ â”‚      10 MINUTES                      â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                                      â”‚
â”‚     Your Meditation Trend                                      View More            â”‚
â”‚     All-Time Overview                              [D] [W] [M]                      â”‚
â”‚                                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚     â”‚     â–ˆ                                                   â”‚                    â”‚
â”‚     â”‚     â–ˆ   â–ˆ       â–ˆ                                       â”‚                    â”‚
â”‚     â”‚     â–ˆ   â–ˆ   â–ˆ   â–ˆ       â–ˆ                               â”‚                    â”‚
â”‚     â”‚ â–ˆ   â–ˆ   â–ˆ   â–ˆ   â–ˆ   â–ˆ   â–ˆ                               â”‚                    â”‚
â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚
â”‚     â”‚ 10  11  12  13  14  15  16                              â”‚                    â”‚
â”‚     â”‚Mon Tue Wed Thu Fri Sat Sun                              â”‚                    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - ProgressStats: currentStreak, totalSessions, totalMinutes, avgSessionLength     â”‚
â”‚  - DailyProgress: date, minutesMeditated, sessionsCount                            â”‚
â”‚  - WeeklyStats: weekStartDate, entries[], totals                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MOOD CHECK-IN SCREEN                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     Mood check-in                                                        âœ•          â”‚
â”‚                                                                                      â”‚
â”‚     ğŸ™‚ Today mood: happiness                                                        â”‚
â”‚                                                                                      â”‚
â”‚     Week of Oct, 14                                                                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                                    â”‚
â”‚     â”‚ Mon â”‚ Tue â”‚ Wed â”‚ Thu â”‚ Fri â”‚ Sat â”‚ Sun â”‚                                    â”‚
â”‚     â”‚  3  â”‚  4  â”‚  5  â”‚  6  â”‚  7  â”‚  8  â”‚  9  â”‚                                    â”‚
â”‚     â”‚ ğŸ˜Š â”‚ ğŸ˜Š â”‚ ğŸ˜ â”‚ ğŸ˜Š â”‚ ğŸ˜¢ â”‚     â”‚     â”‚                                    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚     View history                                                                    â”‚
â”‚                                                                                      â”‚
â”‚     Recommendation for you                                                          â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚     â”‚ ğŸ–¼ï¸ Image â”‚ â”‚ ğŸ–¼ï¸ Image â”‚ â”‚ ğŸ–¼ï¸ Image â”‚                                         â”‚
â”‚     â”‚Your mind â”‚ â”‚Brightnessâ”‚ â”‚Daily concâ”‚                                         â”‚
â”‚     â”‚  10 min  â”‚ â”‚Blue 10minâ”‚ â”‚ 15 min   â”‚                                         â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - MoodEntry: date, mood (enum), notes, timestamp                                   â”‚
â”‚  - MoodType: happiness, calm, anxious, sad, energetic, tired, etc.                 â”‚
â”‚  - WeekMoodSummary: weekStartDate, dailyMoods[]                                    â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HOME SCREEN (Personalized Dashboard)                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     Good afternoon ğŸ‘‹                                            âš™ï¸                 â”‚
â”‚     Mandevo                                                                         â”‚
â”‚                                                                                      â”‚
â”‚     ğŸ™‚ How are you feeling?                                                         â”‚
â”‚                                                                                      â”‚
â”‚     Recently played                                                                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚     â”‚   ğŸ–¼ï¸ Image   â”‚ â”‚   ğŸ–¼ï¸ Image   â”‚                                              â”‚
â”‚     â”‚  Daily calm  â”‚ â”‚  Stay happy  â”‚                                              â”‚
â”‚     â”‚   10 min     â”‚ â”‚   10 min     â”‚                                              â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                                      â”‚
â”‚     Your favorites                                               ğŸ”                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚ ğŸ–¼ï¸ â”‚ Train your mind                                     â”‚                   â”‚
â”‚     â”‚    â”‚ Meditation Â· 10 min                                 â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - User: name, avatar, currentMood                                                  â”‚
â”‚  - PlayHistory: sessionId, playedAt, completedPercentage                           â”‚
â”‚  - Favorite: userId, sessionId, createdAt                                           â”‚
â”‚  - Greeting logic: time-based greeting                                              â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FITNESS/YOGA APP SCREENS                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     Hello, Oliver! ğŸ‘‹                                                               â”‚
â”‚     â—‹ Level 2  âœ¦ 2558 pts                                                          â”‚
â”‚                                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚   ğŸ“… Today                                               â”‚                   â”‚
â”‚     â”‚      20                                                   â”‚                   â”‚
â”‚     â”‚     Sep 2025                                              â”‚                   â”‚
â”‚     â”‚                                                           â”‚                   â”‚
â”‚     â”‚   ğŸ§˜ Yoga          35 Mins                                â”‚                   â”‚
â”‚     â”‚   ğŸ§˜ Meditation    30 Mins                                â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                                      â”‚
â”‚     Information                                                                     â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚     â”‚ â¤ï¸ Heart â”‚ â”‚ ğŸ”¥Calorieâ”‚ â”‚ âš–ï¸ S... â”‚                                         â”‚
â”‚     â”‚ 102 Bpm  â”‚ â”‚ 780 kcal â”‚ â”‚          â”‚                                         â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                                                                                      â”‚
â”‚     Challenge                                                                       â”‚
â”‚     ğŸ† 1250 pts Available Points                                                   â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - UserProfile: name, level, totalPoints, avatar                                    â”‚
â”‚  - DailyActivity: date, yogaMinutes, meditationMinutes                             â”‚
â”‚  - HealthMetrics: heartRate, caloriesBurned, weight                                â”‚
â”‚  - Challenge: title, points, startDate, endDate, progress                          â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROGRAM/COURSE DETAIL                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     â† Back                                                       â† â— â†’              â”‚
â”‚                                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚                    ğŸ–¼ï¸ Header Image                        â”‚                   â”‚
â”‚     â”‚                      16                                   â”‚                   â”‚
â”‚     â”‚                   Lessons for                             â”‚                   â”‚
â”‚     â”‚                     Basic                                 â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                                      â”‚
â”‚     01  King Pigeon                                                                 â”‚
â”‚         Day 1 â€¢ 30 mins                              360 Kcal                       â”‚
â”‚                                                                                      â”‚
â”‚     02  Dancer's                                                                    â”‚
â”‚         Day 2 â€¢ 30 mins                              390 Kcal                       â”‚
â”‚                                                                                      â”‚
â”‚     03  Wide-Legged                                                                 â”‚
â”‚         Day 3 â€¢ 30 mins                              230 Kcal                       â”‚
â”‚                                                                                      â”‚
â”‚     04  Crow Pose                                                                   â”‚
â”‚         Day 4 â€¢ 30 mins                              420 Kcal                       â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - Program: title, description, thumbnail, lessonsCount, totalDuration             â”‚
â”‚  - Lesson: programId, dayNumber, title, duration, calorieEstimate, videoUrl        â”‚
â”‚  - ProgramProgress: programId, lessonsCompleted, currentLesson, startedAt          â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SESSION DETAIL (Instructor View)                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     â† Back                                                                          â”‚
â”‚                                                                                      â”‚
â”‚     Morning Clarity                                                                 â”‚
â”‚                                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚                    ğŸ–¼ï¸ Session Image                       â”‚                   â”‚
â”‚     â”‚                         â–¶                                 â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                                      â”‚
â”‚     About this Session                                                              â”‚
â”‚     Ease into your morning with presence and purpose.                              â”‚
â”‚     "Morning Clarity" is designed to gently awaken your                            â”‚
â”‚     mind and body, helping you clear mental clutter, set                           â”‚
â”‚     positive intentions, and invite calm awareness into                            â”‚
â”‚     your day...                                                                     â”‚
â”‚                                                                                      â”‚
â”‚     Duration:        10 Minutes Â· Guided Â· Beginner Friendly                       â”‚
â”‚                                                                                      â”‚
â”‚     Instructor:      Maya Anand â€” Certified Mindfulness Coach                      â”‚
â”‚                      ğŸ–¼ï¸ Avatar                                                      â”‚
â”‚                                                                                      â”‚
â”‚     What You'll Experience:                                                         â”‚
â”‚     â€¢ Grounding breathwork                                                         â”‚
â”‚     â€¢ Gentle body awareness                                                        â”‚
â”‚     â€¢ Positive intention-setting                                                   â”‚
â”‚     â€¢ Mindful stillness practice                                                   â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - Session: (expanded) aboutText, benefits[], difficulty, isGuided                 â”‚
â”‚  - Instructor: name, title, avatarUrl, bio                                          â”‚
â”‚  - SessionTag: sessionId, tag (beginner, guided, morning, etc.)                    â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DAILY HABIT TRACKER (To-Do Style)                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     Today's Outcome                                                                 â”‚
â”‚                                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚     â”‚  â—‹ To do   â”‚ âœ“ Completedâ”‚ â—‹ Pending  â”‚  â† Underline tabs                     â”‚
â”‚     â”‚    â”€â”€â”€â”€    â”‚            â”‚            â”‚                                        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                                      â”‚
â”‚     â€¢ Morning                                                                       â”‚
â”‚       â˜ Wake up on time                                                            â”‚
â”‚       âœ“ Gym workout                                                                â”‚
â”‚                                                                                      â”‚
â”‚     â€¢ Workload                                                                      â”‚
â”‚       â˜ Finish UI components                                                       â”‚
â”‚       â˜ Share updates with team / review                                           â”‚
â”‚       â˜ Improve portfolio or case study                                            â”‚
â”‚                                                                                      â”‚
â”‚     â€¢ Daily                                                                         â”‚
â”‚       â˜ Plan tomorrow's top task                                                   â”‚
â”‚       â˜ No phone 30 mins before sleep                                              â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - Habit: title, category, isRecurring, frequency                                  â”‚
â”‚  - HabitLog: habitId, date, isCompleted, completedAt                               â”‚
â”‚  - HabitCategory: name (Morning, Workload, Daily, etc.)                            â”‚
â”‚  - DailyHabitSummary: date, totalHabits, completed, pending                        â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NUTRITION TRACKER                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     Hi, Emily                                                    ğŸ””                 â”‚
â”‚     Welcome Back                                                                    â”‚
â”‚                                                                                      â”‚
â”‚     Today's Nutrition Overview                                                      â”‚
â”‚     ğŸ” Search Recipes...                                         â†•                 â”‚
â”‚                                                                                      â”‚
â”‚     Eaten                                                                           â”‚
â”‚     3,143                                                                           â”‚
â”‚                                                                                      â”‚
â”‚     456 kcal over                                                                  â”‚
â”‚     Burned 650                                                                      â”‚
â”‚                                                                   See Stats â–¼      â”‚
â”‚                                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚     â”‚     Carbs       â”‚     Protein     â”‚      Fat        â”‚                        â”‚
â”‚     â”‚   271 / 359g    â”‚    202 / 143g   â”‚   169 / 359g    â”‚                        â”‚
â”‚     â”‚   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘]  â”‚   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]  â”‚   [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘]  â”‚                        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - DailyNutrition: date, caloriesEaten, caloriesBurned, calorieGoal               â”‚
â”‚  - MacroGoals: proteinTarget, carbsTarget, fatTarget                               â”‚
â”‚  - MacroProgress: proteinEaten, carbsEaten, fatEaten                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CALENDAR VIEW (Training Schedule)                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚     â† Calendar                                                   âœï¸                 â”‚
â”‚                                                                                      â”‚
â”‚     Training Days                                           < June >               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                                    â”‚
â”‚     â”‚  3  â”‚  4  â”‚  5  â”‚  6  â”‚  7  â”‚  8  â”‚  9  â”‚                                    â”‚
â”‚     â”‚ Mon â”‚ Tue â”‚ Wed â”‚ Thu â”‚ Fri â”‚ Sat â”‚ Sun â”‚                                    â”‚
â”‚     â”‚  â—  â”‚  â—  â”‚  â—  â”‚  â—  â”‚ (â—) â”‚     â”‚     â”‚  â† Dots = completed               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜    (â—) = selected                  â”‚
â”‚                                                                                      â”‚
â”‚     Today Exercises                                          Today â–¼               â”‚
â”‚                                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚  ğŸ–¼ï¸ â”‚ Morning Stretching                                 â”‚                   â”‚
â”‚     â”‚     â”‚ â¤ï¸ HR â”‚ â–Œâ–Œâ–Œâ–Œ 112                                   â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚  ğŸ–¼ï¸ â”‚ Morning Stretch Flow                               â”‚                   â”‚
â”‚     â”‚     â”‚ â¤ï¸ HR â”‚ 00:45                                      â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                                      â”‚
â”‚  DATA NEEDED:                                                                        â”‚
â”‚  - CalendarDay: date, hasActivity, activityType, isCompleted                       â”‚
â”‚  - ScheduledWorkout: date, workoutId, scheduledTime, completed                     â”‚
â”‚  - WorkoutMetrics: heartRate, duration, caloriesBurned                             â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Current State Analysis

### What We Have

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EXISTING MODELS                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ProtocolEntry (Generic - stores everything in JSON blob)                   â”‚
â”‚  â”œâ”€â”€ id: int?                                                                â”‚
â”‚  â”œâ”€â”€ timestamp: DateTime                                                     â”‚
â”‚  â”œâ”€â”€ type: ProtocolType (gym, meal, dose, meditation, focus, sleep)         â”‚
â”‚  â”œâ”€â”€ data: Map<String, dynamic>  â† PROBLEM: Unstructured, no validation     â”‚
â”‚  â””â”€â”€ notes: String?                                                          â”‚
â”‚                                                                              â”‚
â”‚  JournalEntry (Voice transcriptions)                                        â”‚
â”‚  â”œâ”€â”€ id: int?                                                                â”‚
â”‚  â”œâ”€â”€ timestamp: DateTime                                                     â”‚
â”‚  â”œâ”€â”€ transcription: String                                                   â”‚
â”‚  â”œâ”€â”€ mood: double? (1-10)                                                    â”‚
â”‚  â”œâ”€â”€ sentiment: String?                                                      â”‚
â”‚  â””â”€â”€ tags: List<String>                                                      â”‚
â”‚                                                                              â”‚
â”‚  CharacterStats (Daily aggregate RPG stats)                                 â”‚
â”‚  â”œâ”€â”€ id: int?                                                                â”‚
â”‚  â”œâ”€â”€ date: DateTime                                                          â”‚
â”‚  â”œâ”€â”€ strength, intellect, spirit, sales: double (0-100)                     â”‚
â”‚  â”œâ”€â”€ totalXP: int                                                            â”‚
â”‚  â””â”€â”€ level: int                                                              â”‚
â”‚                                                                              â”‚
â”‚  Mantra (Affirmations)                                                      â”‚
â”‚  â”œâ”€â”€ id: int?                                                                â”‚
â”‚  â”œâ”€â”€ text: String                                                            â”‚
â”‚  â”œâ”€â”€ isActive: bool                                                          â”‚
â”‚  â”œâ”€â”€ createdAt: DateTime                                                     â”‚
â”‚  â””â”€â”€ category: String?                                                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Problems with Current Approach

1. **ProtocolEntry.data is unstructured** - No type safety, no validation
2. **No reference data** - No supplements catalog, no workout templates
3. **No scheduling/planning** - Can't set up recurring doses or workout plans
4. **No progress tracking** - No way to track PRs, streaks, trends
5. **No linking** - Can't connect a journal entry to a workout it describes

---

## Proposed Model Architecture

### Entity Relationship Diagram (ASCII)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ENTITY RELATIONSHIPS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   REFERENCE DATA (Static/User-defined templates)                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  Supplement   â”‚    â”‚ ExerciseType  â”‚    â”‚ MealTemplate  â”‚                       â”‚
â”‚   â”‚  (catalog)    â”‚    â”‚  (catalog)    â”‚    â”‚  (favorites)  â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚           â”‚                    â”‚                    â”‚                                â”‚
â”‚           â”‚ 1:N               â”‚ 1:N               â”‚ 1:N                             â”‚
â”‚           â–¼                    â–¼                    â–¼                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚   DoseLog     â”‚    â”‚  WorkoutLog   â”‚    â”‚   MealLog     â”‚                       â”‚
â”‚   â”‚   (entries)   â”‚    â”‚   (entries)   â”‚    â”‚   (entries)   â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚           â”‚                    â”‚                    â”‚                                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                               â”‚                                                      â”‚
â”‚                               â–¼ N:1                                                  â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚                       â”‚  DailyLog     â”‚ â—„â”€â”€â”€â”€ Aggregates all entries for a day      â”‚
â”‚                       â”‚  (summary)    â”‚                                              â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                               â”‚                                                      â”‚
â”‚                               â”‚ 1:1                                                  â”‚
â”‚                               â–¼                                                      â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚                       â”‚CharacterStats â”‚ â—„â”€â”€â”€â”€ XP calculation from DailyLog          â”‚
â”‚                       â”‚  (gamified)   â”‚                                              â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                                      â”‚
â”‚   PARALLEL TRACKS:                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚ MeditationLog â”‚    â”‚   SleepLog    â”‚    â”‚  JournalEntry â”‚                       â”‚
â”‚   â”‚               â”‚    â”‚               â”‚    â”‚  (voice/text) â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                                      â”‚
â”‚   SCHEDULING:                                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚   â”‚ DoseSchedule  â”‚    â”‚WorkoutPlan    â”‚ â—„â”€â”€â”€â”€ Future: recurring schedules          â”‚
â”‚   â”‚  (reminders)  â”‚    â”‚  (routines)   â”‚                                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Detailed Model Definitions

### 0. USER & PROFILE

#### UserProfile (Core User Data)

```dart
/// The user's profile and account information
class UserProfile {
  final int? id;
  final String? firebaseUid;           // External auth ID
  final String name;                    // Display name
  final String? email;
  final String? avatarUrl;             // Profile picture URL
  final String? avatarLocalPath;       // Local cached avatar
  final DateTime createdAt;
  final DateTime? lastActiveAt;
  
  // Gamification
  final int level;                      // Current level (1-100+)
  final int totalXP;                    // Lifetime XP earned
  final int currentStreak;              // Days in a row with activity
  final int longestStreak;              // Best streak ever
  final String? title;                  // "Novice", "Adept", "Master", custom
  
  // Preferences
  final String? timezone;
  final bool usesMetric;               // kg vs lbs
  final TimeOfDay? wakeUpTime;         // For "Good morning" greetings
  final TimeOfDay? bedTime;
  
  // Subscription/Premium
  final bool isPremium;
  final DateTime? premiumExpiresAt;
  
  // Onboarding
  final bool hasCompletedOnboarding;
  final List<String>? goals;           // User's selected goals
  final List<String>? focusAreas;      // "meditation", "fitness", "nutrition"
}
```

#### UserSettings (Preferences)

```dart
/// User preferences and settings
class UserSettings {
  final int? id;
  final int userId;
  
  // Notifications
  final bool notificationsEnabled;
  final bool doseRemindersEnabled;
  final bool workoutRemindersEnabled;
  final bool meditationRemindersEnabled;
  final bool dailySummaryEnabled;
  final TimeOfDay? dailySummaryTime;
  
  // Privacy
  final bool shareProgressPublicly;
  final bool allowAnalytics;
  
  // Display
  final String themeMode;              // "dark", "light", "system"
  final bool showXPAnimations;
  final bool hapticFeedbackEnabled;
  
  // Units
  final String weightUnit;             // "lbs", "kg"
  final String distanceUnit;           // "miles", "km"
  final String temperatureUnit;        // "F", "C"
  
  // Health integrations
  final bool syncWithAppleHealth;
  final bool syncWithGoogleFit;
}
```

---

### 0.1 CONTENT & SESSIONS (What users consume)

These are **content** models - pre-made sessions, programs, and lessons that users can play/follow.
Different from **log** models which track what users actually did.

#### ContentCategory (Organization)

```dart
/// Categories for organizing content (meditation, yoga, etc.)
class ContentCategory {
  final int? id;
  final String name;                   // "Meditation", "Yoga", "Breathwork"
  final String? slug;                  // "meditation" (for URLs/keys)
  final String? description;
  final String? iconName;              // Icon identifier
  final String? iconUrl;               // Or custom icon URL
  final String colorHex;               // "#6B5B95" for UI theming
  final int sortOrder;                 // Display order
  final bool isActive;
  final ContentType contentType;       // meditation, workout, sleep, etc.
  
  // Subcategories
  final int? parentCategoryId;         // For nested categories
}

enum ContentType {
  meditation,
  breathwork,
  yoga,
  workout,
  stretching,
  sleep,
  focus,
  motivation,
  education;
}
```

#### Instructor (Content Creator)

```dart
/// Instructor or guide who creates content
class Instructor {
  final int? id;
  final String name;                   // "Maya Anand"
  final String? title;                 // "Certified Mindfulness Coach"
  final String? bio;                   // Full bio text
  final String? shortBio;              // One-liner for cards
  final String? avatarUrl;
  final String? coverImageUrl;         // Header image for profile
  
  // Credentials
  final List<String>? certifications;  // ["RYT-200", "MBSR Certified"]
  final int? yearsExperience;
  
  // Social
  final String? instagramHandle;
  final String? websiteUrl;
  
  // Stats
  final int sessionsCount;             // How many sessions they have
  final int followersCount;            // Users following them
  final double? averageRating;         // Average session rating
  
  final bool isFeatured;               // Show in featured section
  final bool isActive;
  final DateTime createdAt;
}
```

#### Session (Individual Content Piece)

```dart
/// A single meditation session, yoga class, or workout
/// This is CONTENT - something a user can play/follow
class Session {
  final int? id;
  final String title;                  // "Morning Clarity"
  final String? subtitle;              // "10 min guided meditation"
  final String shortDescription;       // For cards (1-2 sentences)
  final String? longDescription;       // Full "About this Session" text
  
  // Media
  final String? thumbnailUrl;          // Card image
  final String? coverImageUrl;         // Large header image
  final String? audioUrl;              // Audio file URL
  final String? videoUrl;              // Video file URL (if applicable)
  final String? previewUrl;            // Short preview clip
  
  // Duration
  final int durationSeconds;           // Total length
  final String durationDisplay;        // "10 min" or "1 hr 5 min"
  
  // Classification
  final int categoryId;                // FK to ContentCategory
  final int? instructorId;             // FK to Instructor (nullable for self-guided)
  final int? programId;                // FK to Program (if part of a program)
  final int? lessonNumber;             // Order in program (1, 2, 3...)
  
  // Attributes
  final SessionDifficulty difficulty;  // beginner, intermediate, advanced
  final bool isGuided;                 // Has instructor voice?
  final bool isFree;                   // Available without premium?
  final bool isFeatured;               // Show in featured sections?
  final bool isDownloadable;           // Can be saved offline?
  
  // Tags & Benefits
  final List<String> tags;             // ["morning", "stress-relief", "focus"]
  final List<String>? benefits;        // ["Grounding breathwork", "Body awareness"]
  final List<String>? requirements;    // ["Yoga mat", "Quiet space"]
  
  // Estimated outcomes
  final int? calorieEstimate;          // For workouts
  final String? targetMood;            // "calm", "energized", "focused"
  
  // Stats (updated periodically)
  final int playCount;                 // How many times played
  final int completionCount;           // How many completed fully
  final double? averageRating;         // User ratings
  final int ratingCount;
  
  // Metadata
  final DateTime publishedAt;
  final DateTime? updatedAt;
  final bool isActive;
  final int sortOrder;                 // For manual ordering
  
  // Relationships (loaded separately)
  ContentCategory? category;
  Instructor? instructor;
  Program? program;
}

enum SessionDifficulty {
  beginner,
  intermediate,
  advanced,
  allLevels;
  
  String get displayName {
    switch (this) {
      case beginner: return 'Beginner';
      case intermediate: return 'Intermediate';
      case advanced: return 'Advanced';
      case allLevels: return 'All Levels';
    }
  }
}
```

#### Program (Multi-Session Course)

```dart
/// A program or course containing multiple sessions/lessons
/// e.g., "7-Day Meditation Challenge", "30-Day Yoga Journey"
class Program {
  final int? id;
  final String title;                  // "7 Days Meditation Challenge"
  final String? subtitle;              // "Build a daily practice"
  final String shortDescription;       // Card text
  final String? longDescription;       // Full about text
  
  // Media
  final String? thumbnailUrl;
  final String? coverImageUrl;
  final String? promoVideoUrl;         // Intro/trailer video
  
  // Structure
  final int totalLessons;              // Number of sessions
  final int totalDurationMinutes;      // Sum of all sessions
  final int durationDays;              // Intended duration (7, 30, etc.)
  final ProgramPace pace;              // daily, flexible
  
  // Classification
  final int categoryId;
  final int? instructorId;
  final ProgramDifficulty difficulty;
  final bool isFree;
  final bool isFeatured;
  
  // Content details
  final List<String> learningOutcomes; // "What you'll learn" bullets
  final List<String>? requirements;    // Prerequisites
  final String? targetAudience;        // "Beginners", "Busy professionals"
  
  // Stats
  final int enrollmentCount;           // Users who started
  final int completionCount;           // Users who finished
  final double? averageRating;
  final int ratingCount;
  
  // Gamification
  final int xpReward;                  // XP for completing program
  final String? badgeId;               // Badge awarded on completion
  
  // Metadata
  final DateTime publishedAt;
  final bool isActive;
  
  // Loaded separately
  List<Session>? sessions;
  Instructor? instructor;
}

enum ProgramPace {
  daily,         // One lesson per day
  flexible,      // Go at your own pace
  scheduled;     // Specific dates
}

enum ProgramDifficulty {
  beginner,
  intermediate,
  advanced,
  progressive;   // Starts easy, gets harder
}
```

---

### 0.2 USER ACTIVITY & PROGRESS

These models track what the user **actually did** with the content.

#### PlayHistory (Session Playback Tracking)

```dart
/// Tracks when a user plays/watches a session
class PlayHistory {
  final int? id;
  final int userId;
  final int sessionId;
  final DateTime startedAt;
  final DateTime? endedAt;
  
  // Progress
  final int progressSeconds;           // How far they got
  final double completionPercentage;   // 0-100
  final bool isCompleted;              // Finished the whole thing?
  
  // Context
  final String? deviceType;            // "iOS", "Android", "Web"
  final bool wasOffline;               // Downloaded playback?
  
  // For analytics
  final int? pauseCount;               // How many times paused
  final int? totalSecondsPlayed;       // Including replays
}
```

#### Favorite (Saved/Bookmarked Content)

```dart
/// User's favorited/saved sessions and programs
class Favorite {
  final int? id;
  final int userId;
  final FavoriteType type;             // session or program
  final int itemId;                    // sessionId or programId
  final DateTime createdAt;
  
  // Loaded separately
  Session? session;
  Program? program;
}

enum FavoriteType { session, program }
```

#### ProgramEnrollment (User's Program Progress)

```dart
/// Tracks a user's progress through a program
class ProgramEnrollment {
  final int? id;
  final int userId;
  final int programId;
  final DateTime enrolledAt;
  final DateTime? completedAt;
  
  // Progress
  final int lessonsCompleted;
  final int currentLessonNumber;       // Which one they're on
  final DateTime? lastActivityAt;
  final double completionPercentage;
  
  // Status
  final EnrollmentStatus status;
  
  // Gamification
  final int xpEarned;                  // XP from this program
  final bool badgeAwarded;
  
  // Loaded separately
  Program? program;
  List<LessonProgress>? lessonProgress;
}

enum EnrollmentStatus {
  active,        // Currently working on it
  completed,     // Finished all lessons
  paused,        // Took a break
  abandoned;     // Gave up
}

/// Progress on individual lessons within a program
class LessonProgress {
  final int? id;
  final int enrollmentId;
  final int sessionId;
  final int lessonNumber;
  final bool isCompleted;
  final DateTime? completedAt;
  final int? durationWatched;
}
```

#### SessionRating (User Reviews)

```dart
/// User rating/review of a session
class SessionRating {
  final int? id;
  final int userId;
  final int sessionId;
  final int rating;                    // 1-5 stars
  final String? review;                // Optional text review
  final DateTime createdAt;
  final bool isPublic;                 // Show to others?
}
```

---

### 0.3 MOOD & EMOTIONAL TRACKING

#### MoodEntry (Mood Check-In)

```dart
/// A single mood check-in
class MoodEntry {
  final int? id;
  final int userId;
  final DateTime timestamp;
  final MoodType mood;                 // Primary mood
  final int? intensity;                // 1-10 how strong
  
  // Optional details
  final List<MoodType>? secondaryMoods; // Additional feelings
  final List<String>? factors;         // "sleep", "work", "exercise", "weather"
  final String? notes;                 // Free text
  
  // Context
  final MoodCheckInType checkInType;   // morning, evening, manual
  final int? linkedSessionId;          // If after a session
  final int? linkedWorkoutId;          // If after a workout
  
  // For AI
  final int? journalEntryId;           // If parsed from voice
}

enum MoodType {
  // Positive
  happy,
  calm,
  grateful,
  energized,
  focused,
  confident,
  excited,
  peaceful,
  content,
  
  // Neutral
  neutral,
  tired,
  distracted,
  
  // Negative
  anxious,
  stressed,
  sad,
  frustrated,
  angry,
  overwhelmed,
  lonely,
  bored;
  
  String get emoji {
    switch (this) {
      case happy: return 'ğŸ˜Š';
      case calm: return 'ğŸ˜Œ';
      case grateful: return 'ğŸ™';
      case energized: return 'âš¡';
      case focused: return 'ğŸ¯';
      case confident: return 'ğŸ’ª';
      case excited: return 'ğŸ‰';
      case peaceful: return 'â˜®ï¸';
      case content: return 'ğŸ˜Š';
      case neutral: return 'ğŸ˜';
      case tired: return 'ğŸ˜´';
      case distracted: return 'ğŸ¤”';
      case anxious: return 'ğŸ˜°';
      case stressed: return 'ğŸ˜«';
      case sad: return 'ğŸ˜¢';
      case frustrated: return 'ğŸ˜¤';
      case angry: return 'ğŸ˜ ';
      case overwhelmed: return 'ğŸ¤¯';
      case lonely: return 'ğŸ˜”';
      case bored: return 'ğŸ˜‘';
    }
  }
  
  bool get isPositive => index <= 8;
  bool get isNeutral => index >= 9 && index <= 11;
  bool get isNegative => index >= 12;
}

enum MoodCheckInType {
  morning,       // Daily morning check-in
  evening,       // Daily evening reflection
  postSession,   // After meditation/workout
  manual;        // User initiated
}
```

#### MoodTrend (Aggregated Mood Data)

> âš ï¸ **COMPUTED MODEL** - This is computed at runtime from MoodEntry records, not stored in database.

```dart
/// Aggregated mood data for trends
/// NOTE: Computed on-demand, not persisted
class MoodTrend {
  final DateTime startDate;
  final DateTime endDate;
  final TrendPeriod period;            // week, month, year
  
  // Aggregates
  final Map<MoodType, int> moodCounts; // How often each mood
  final MoodType dominantMood;         // Most common
  final double averageIntensity;
  final int totalEntries;
  
  // Patterns
  final MoodType? bestDayMood;         // e.g., "You feel best on Sundays"
  final int? bestDayOfWeek;
  final double positivePercentage;     // % of positive moods
}

enum TrendPeriod { week, month, quarter, year, allTime }
```

---

### 0.4 HABITS & DAILY TASKS

#### Habit (Recurring Task Definition)

```dart
/// A habit or recurring task the user wants to track
class Habit {
  final int? id;
  final int userId;
  final String title;                  // "Wake up on time"
  final String? description;
  final String? emoji;                 // Display icon
  final String colorHex;               // For UI
  
  // Category
  final HabitCategory category;        // morning, workload, health, etc.
  final String? customCategory;        // User-defined category
  
  // Frequency
  final HabitFrequency frequency;      // daily, weekly, specific days
  final List<int>? daysOfWeek;         // 1-7 for weekly habits
  final int? timesPerDay;              // For "3x daily" type habits
  final int? timesPerWeek;             // For "3x per week" habits
  
  // Timing
  final TimeOfDay? reminderTime;
  final bool reminderEnabled;
  final TimeOfDay? targetTime;         // When it should be done
  final bool isTimeSensitive;          // Must be done at specific time?
  
  // Tracking type
  final HabitType type;                // boolean, counter, duration
  final int? targetCount;              // For counter type
  final int? targetMinutes;            // For duration type
  
  // Gamification
  final int xpPerCompletion;           // XP earned each time
  
  // Metadata
  final DateTime createdAt;
  final bool isActive;
  final bool isArchived;
  final int sortOrder;
}

enum HabitCategory {
  morning,
  workload,
  health,
  mindfulness,
  fitness,
  nutrition,
  sleep,
  social,
  learning,
  custom;
}

enum HabitFrequency {
  daily,
  weekdays,
  weekends,
  specificDays,
  timesPerWeek;
}

enum HabitType {
  boolean,       // Just yes/no
  counter,       // Count occurrences (e.g., 8 glasses of water)
  duration;      // Track time (e.g., 30 min reading)
}
```

#### HabitLog (Individual Completion)

```dart
/// Record of completing a habit on a specific day
class HabitLog {
  final int? id;
  final int habitId;
  final DateTime date;                 // Just the date, no time
  final DateTime? completedAt;         // Actual completion time
  
  // Completion data (depends on habit type)
  final bool isCompleted;
  final int? count;                    // For counter habits
  final int? durationMinutes;          // For duration habits
  
  // Notes
  final String? notes;
  
  // Status
  final HabitLogStatus status;
  
  // Context
  final int? journalEntryId;           // If logged via voice
}

enum HabitLogStatus {
  pending,       // Not yet due
  completed,     // Done
  skipped,       // User skipped intentionally
  missed;        // Day passed without completion
}
```

#### DailyHabitSummary (Daily Aggregate)

```dart
/// Summary of all habits for a single day
class DailyHabitSummary {
  final DateTime date;
  final int totalHabits;               // How many were due
  final int completed;
  final int skipped;
  final int missed;
  final double completionRate;         // 0-100%
  
  // XP earned from habits today
  final int xpEarned;
  
  // By category
  final Map<HabitCategory, int> completedByCategory;
}
```

---

### 1. SUPPLEMENTS & DOSES

#### Supplement (Reference/Catalog)

```dart
/// A supplement or medication in the user's stack
/// This is REFERENCE data - defines what can be taken
class Supplement {
  final int? id;
  final String name;                    // "Vitamin D3", "Magnesium Glycinate"
  final String? brand;                  // "Thorne", "NOW Foods"
  final SupplementCategory category;   // vitamin, mineral, nootropic, medication, etc.
  final double defaultDoseMg;          // Standard dose in milligrams
  final String? unit;                   // "mg", "IU", "mcg", "capsule"
  final String? notes;                  // "Take with fat for absorption"
  final bool isActive;                  // Currently in stack?
  final DateTime createdAt;
  final String? imageUrl;              // For UI display
  
  // Timing preferences
  final List<DoseTime> preferredTimes; // morning, afternoon, evening, bedtime
  final bool takeWithFood;
  final bool takeWithFat;              // Fat-soluble vitamins
  
  // Safety info
  final double? maxDailyMg;            // Upper limit
  final List<String>? interactions;    // Known interactions
}

enum SupplementCategory {
  vitamin,
  mineral,
  aminoAcid,
  herb,
  nootropic,
  probiotic,
  omega,
  hormone,
  medication,
  other;
}

enum DoseTime {
  wakeUp,      // First thing
  morning,     // With breakfast
  midday,      // Lunch
  afternoon,   // 2-4pm
  evening,     // Dinner
  bedtime,     // Before sleep
  asNeeded;    // PRN
}
```

#### DoseLog (Entry/Event)

```dart
/// A single dose taken - the actual event
class DoseLog {
  final int? id;
  final int supplementId;              // FK to Supplement
  final DateTime timestamp;
  final double amountMg;               // Actual amount taken
  final String? unit;                  // Override if different from default
  final DoseSource source;             // How was this logged?
  final String? notes;
  
  // Context
  final bool takenWithFood;
  final bool takenWithFat;
  final String? mealContext;           // "breakfast", "lunch", etc.
  
  // For AI parsing
  final int? journalEntryId;           // If extracted from voice
  final double? confidence;            // AI confidence score
  
  // Derived (for UI)
  Supplement? supplement;              // Joined data
}

enum DoseSource {
  manual,        // User tapped button
  voice,         // Extracted from transcription
  schedule,      // Auto-logged from reminder confirmation
  import;        // Imported from health app
}
```

#### DoseSchedule (Planning/Reminders)

```dart
/// A scheduled/recurring dose
class DoseSchedule {
  final int? id;
  final int supplementId;
  final double amountMg;
  final List<DoseTime> times;          // When to take
  final List<int> daysOfWeek;          // 1-7, empty = every day
  final bool isActive;
  final DateTime? startDate;
  final DateTime? endDate;             // For cycles
  final bool reminderEnabled;
  final DateTime createdAt;
}
```

---

### 2. WORKOUTS & GYM

#### ExerciseType (Reference/Catalog)

```dart
/// An exercise in the library
class ExerciseType {
  final int? id;
  final String name;                   // "Barbell Bench Press"
  final ExerciseCategory category;     // chest, back, legs, etc.
  final MuscleGroup primaryMuscle;
  final List<MuscleGroup> secondaryMuscles;
  final EquipmentType equipment;       // barbell, dumbbell, machine, bodyweight
  final String? instructions;
  final String? videoUrl;
  final String? imageUrl;
  final bool isCompound;               // Multi-joint?
  final bool isCustom;                 // User-created?
  final DateTime createdAt;
}

enum ExerciseCategory {
  chest, back, shoulders, biceps, triceps, forearms,
  quadriceps, hamstrings, glutes, calves, core,
  cardio, stretching, other;
}

enum MuscleGroup {
  chest, lats, traps, rhomboids, rearDelts,
  frontDelts, sideDelts, biceps, triceps, forearms,
  abs, obliques, lowerBack, glutes, quads, hamstrings, calves;
}

enum EquipmentType {
  barbell, dumbbell, kettlebell, machine, cable,
  bodyweight, bands, cardioMachine, other;
}
```

#### WorkoutLog (Entry/Event)

```dart
/// A workout session
class WorkoutLog {
  final int? id;
  final DateTime startTime;
  final DateTime? endTime;
  final int? durationMinutes;          // Calculated or manual
  final WorkoutType type;              // strength, cardio, flexibility, mixed
  final String? name;                  // "Push Day", "Morning Run"
  final String? notes;
  final WorkoutSource source;
  
  // Location
  final String? locationName;          // "Home Gym", "Planet Fitness"
  final double? latitude;
  final double? longitude;
  
  // Metrics
  final int? caloriesBurned;           // From watch or estimate
  final int? avgHeartRate;
  final int? maxHeartRate;
  
  // Subjective
  final int? perceivedEffort;          // 1-10 RPE
  final int? energyLevel;              // 1-10 before workout
  final String? mood;                  // before/after
  
  // For AI parsing
  final int? journalEntryId;
  
  // Child exercises
  List<ExerciseSet>? sets;             // Joined data
}

enum WorkoutType {
  strength, hypertrophy, powerlifting, cardio,
  hiit, flexibility, yoga, sports, mixed;
}

enum WorkoutSource {
  manual, voice, healthKit, googleFit, import;
}
```

#### ExerciseSet (Detail within Workout)

```dart
/// A single set of an exercise within a workout
class ExerciseSet {
  final int? id;
  final int workoutLogId;              // FK to WorkoutLog
  final int exerciseTypeId;            // FK to ExerciseType
  final int setNumber;                 // 1, 2, 3...
  final SetType setType;               // warmup, working, drop, failure
  
  // For strength training
  final double? weightLbs;
  final double? weightKg;
  final int? reps;
  final int? targetReps;               // What was planned
  final int? rpe;                      // 1-10 Rating of Perceived Exertion
  final bool? toFailure;
  
  // For cardio/timed
  final int? durationSeconds;
  final double? distanceMiles;
  final double? distanceKm;
  final int? caloriesBurned;
  
  // For tracking PRs
  final bool isPersonalRecord;
  
  String? notes;
  
  // Derived
  ExerciseType? exercise;              // Joined data
}

enum SetType {
  warmup, working, topSet, backOff, dropSet, 
  restPause, cluster, amrap, toFailure;
}
```

#### PersonalRecord (Achievements)

```dart
/// Personal record tracking
class PersonalRecord {
  final int? id;
  final int exerciseTypeId;
  final PRType type;                   // 1RM, 3RM, 5RM, maxReps, maxWeight
  final double value;                  // The record value
  final String unit;                   // "lbs", "kg", "reps"
  final DateTime achievedAt;
  final int? workoutLogId;             // Which workout?
  final int? setId;                    // Which set?
  final double? bodyweightLbs;         // For relative strength
  final String? notes;
}

enum PRType {
  oneRepMax, threeRepMax, fiveRepMax, tenRepMax,
  maxReps, maxWeight, maxVolume, maxDuration;
}
```

---

### 3. MEALS & NUTRITION

#### MealLog (Entry/Event)

```dart
/// A meal or eating event
class MealLog {
  final int? id;
  final DateTime timestamp;
  final MealType type;                 // breakfast, lunch, dinner, snack
  final String? description;           // "Chicken and rice"
  final MealSource source;
  
  // Macros (all optional - filled in if known)
  final int? calories;
  final int? proteinGrams;
  final int? carbsGrams;
  final int? fatGrams;
  final int? fiberGrams;
  
  // Quick logging
  final ProteinLevel? proteinLevel;    // low, moderate, high (for quick entry)
  final MealQuality? quality;          // poor, okay, good, excellent
  
  // Context
  final String? location;              // "Home", "Restaurant name"
  final bool homemade;
  final bool mealPrepped;
  
  // Photo
  final String? photoPath;             // Local path to meal photo
  
  // For AI parsing
  final int? journalEntryId;
  final double? confidence;
  
  String? notes;
  
  // Child items (optional detailed logging)
  List<MealItem>? items;
}

enum MealType {
  breakfast, lunch, dinner, snack, 
  preworkout, postworkout, other;
}

enum MealSource {
  manual, voice, photo, barcode, import;
}

enum ProteinLevel { low, moderate, high, veryHigh }
enum MealQuality { poor, okay, good, excellent }
```

#### MealItem (Detailed food items)

```dart
/// Individual food item within a meal (optional detail)
class MealItem {
  final int? id;
  final int mealLogId;
  final String name;                   // "Grilled Chicken Breast"
  final double? servingSize;
  final String? servingUnit;           // "oz", "g", "cup"
  
  // Macros for this item
  final int? calories;
  final int? proteinGrams;
  final int? carbsGrams;
  final int? fatGrams;
  
  // Barcode lookup
  final String? barcode;
  final String? brandName;
}
```

#### DailyNutrition (Daily Aggregate)

```dart
/// Daily nutrition summary - aggregated from MealLogs
/// This can be computed or cached for performance
class DailyNutrition {
  final int? id;
  final int userId;
  final DateTime date;                 // Just the date
  
  // Calories
  final int caloriesEaten;             // Sum from meals
  final int caloriesBurned;            // From workouts + BMR
  final int calorieGoal;               // Target for the day
  final int calorieBalance;            // Eaten - Burned (deficit/surplus)
  
  // Macros eaten
  final int proteinGrams;
  final int carbsGrams;
  final int fatGrams;
  final int fiberGrams;
  
  // Macro goals/targets
  final int proteinTarget;
  final int carbsTarget;
  final int fatTarget;
  final int fiberTarget;
  
  // Quick metrics
  final int mealsLogged;
  final int snacksLogged;
  final double proteinPercentage;      // % of goal achieved
  final double carbsPercentage;
  final double fatPercentage;
  
  // Water tracking
  final int waterOz;                   // Ounces consumed
  final int waterTarget;               // Target ounces
  
  // Scores
  final double adherenceScore;         // 0-100 how well hit targets
  final NutritionGrade? grade;         // A, B, C, D, F
  
  // Metadata
  final DateTime? lastUpdatedAt;
  final bool isManualOverride;         // User manually set values
}

enum NutritionGrade {
  A,   // 90-100% adherence
  B,   // 80-89%
  C,   // 70-79%
  D,   // 60-69%
  F;   // Below 60%
  
  static NutritionGrade fromScore(double score) {
    if (score >= 90) return A;
    if (score >= 80) return B;
    if (score >= 70) return C;
    if (score >= 60) return D;
    return F;
  }
}
```

#### NutritionGoal (User's Nutrition Targets)

```dart
/// User's nutrition goals/targets
/// Stored once, updated when user changes goals
class NutritionGoal {
  final int? id;
  final int userId;
  final DateTime effectiveDate;        // When this goal starts
  
  // Calorie goal
  final int dailyCalorieTarget;
  final NutritionGoalType goalType;    // lose, maintain, gain
  final double weeklyWeightChangeTarget; // lbs per week
  
  // Macro splits (percentages that sum to 100)
  final int proteinPercentage;         // e.g., 30%
  final int carbsPercentage;           // e.g., 40%
  final int fatPercentage;             // e.g., 30%
  
  // Calculated from percentages and calories
  final int proteinGrams;
  final int carbsGrams;
  final int fatGrams;
  
  // Other targets
  final int fiberGrams;
  final int waterOz;
  final int sodiumMg;
  final int sugarGrams;
  
  // Activity level used in calculation
  final ActivityLevel activityLevel;
  
  // Source data
  final double? bmr;                   // Basal Metabolic Rate
  final double? tdee;                  // Total Daily Energy Expenditure
  
  final DateTime createdAt;
  final bool isActive;
}

enum NutritionGoalType {
  lose,      // Calorie deficit
  maintain,  // Maintenance
  gain,      // Calorie surplus
  recomp;    // Body recomposition
}

enum ActivityLevel {
  sedentary,       // Little/no exercise
  lightlyActive,   // 1-3 days/week
  moderatelyActive, // 3-5 days/week
  veryActive,      // 6-7 days/week
  extraActive;     // Athlete/physical job
  
  double get multiplier {
    switch (this) {
      case sedentary: return 1.2;
      case lightlyActive: return 1.375;
      case moderatelyActive: return 1.55;
      case veryActive: return 1.725;
      case extraActive: return 1.9;
    }
  }
}
```

---

### 4. MEDITATION & MINDFULNESS

#### MeditationLog (Entry/Event)

```dart
/// A meditation session
class MeditationLog {
  final int? id;
  final DateTime startTime;
  final DateTime? endTime;
  final int durationMinutes;
  final MeditationType type;
  final MeditationSource source;
  
  // Session details
  final String? technique;             // "Body scan", "Breath focus", "Loving-kindness"
  final String? guidedBy;              // "Headspace", "Calm", "Self-guided"
  final String? audioTrackName;        // If using an app
  
  // Environment
  final String? location;              // "Bedroom", "Office", "Park"
  final bool timerUsed;
  final bool guidedSession;
  
  // Subjective experience
  final int? focusQuality;             // 1-10: How focused were you?
  final int? calmBefore;               // 1-10: Stress level before
  final int? calmAfter;                // 1-10: Stress level after
  final int? distractionLevel;         // 1-10: How distracted?
  final List<String>? insights;        // Key thoughts/realizations
  
  // For trends
  final int? heartRateStart;
  final int? heartRateEnd;
  final int? hrvBefore;
  final int? hrvAfter;
  
  // For AI parsing
  final int? journalEntryId;
  
  String? notes;
}

enum MeditationType {
  mindfulness, breathing, bodyScan, lovingKindness,
  visualization, mantra, transcendental, yoga, 
  walking, movement, other;
}

enum MeditationSource {
  manual, voice, appSync, timer;
}
```

#### MeditationStreak (Gamification)

```dart
/// Track meditation streaks and milestones
class MeditationStreak {
  final int? id;
  final int currentStreak;             // Days in a row
  final int longestStreak;
  final DateTime? streakStartDate;
  final DateTime lastMeditationDate;
  final int totalSessions;
  final int totalMinutes;
  
  // Milestones achieved
  final List<String> badges;           // "7 Day Streak", "100 Sessions"
}
```

---

### 5. SLEEP TRACKING

#### SleepLog (Entry/Event)

```dart
/// A sleep session
class SleepLog {
  final int? id;
  final DateTime bedTime;              // When got in bed
  final DateTime? sleepTime;           // When fell asleep
  final DateTime? wakeTime;            // When woke up
  final DateTime? outOfBedTime;        // When got out of bed
  
  // Duration
  final int? totalMinutes;
  final int? timeToFallAsleepMinutes;
  final int? timesWoken;
  
  // Quality metrics
  final int? qualityRating;            // 1-10 subjective
  final int? restfulnessRating;        // 1-10 how rested do you feel?
  
  // Sleep phases (from wearables)
  final int? deepSleepMinutes;
  final int? remSleepMinutes;
  final int? lightSleepMinutes;
  final int? awakeMinutes;
  
  // Factors
  final bool? alcoholConsumed;
  final bool? caffeineAfternoon;
  final bool? screenBeforeBed;
  final bool? exercisedToday;
  final int? stressLevel;              // 1-10
  
  // Environment
  final int? roomTempF;
  final bool? darkRoom;
  final bool? whiteNoise;
  
  // For AI parsing
  final int? journalEntryId;
  
  String? notes;
  final SleepSource source;
}

enum SleepSource {
  manual, voice, appleWatch, ouraRing, whoop, other;
}
```

---

### 5.1 HEALTH METRICS & BIOMETRICS

Models for tracking health data from wearables and manual entry.

#### HealthMetrics (Point-in-Time Reading)

```dart
/// A single health metric reading
/// Can come from wearables, manual entry, or health apps
class HealthMetrics {
  final int? id;
  final int userId;
  final DateTime timestamp;
  final HealthMetricSource source;
  
  // Heart metrics
  final int? restingHeartRate;         // BPM
  final int? currentHeartRate;         // BPM (if real-time)
  final int? maxHeartRate;             // Today's max
  final int? hrv;                      // Heart Rate Variability (ms)
  
  // Body composition
  final double? weightLbs;
  final double? weightKg;
  final double? bodyFatPercentage;
  final double? muscleMassLbs;
  final double? waterPercentage;
  final double? boneMassLbs;
  final double? visceralFat;           // Level 1-59
  
  // Vitals
  final int? systolicBP;               // Blood pressure
  final int? diastolicBP;
  final double? bloodOxygen;           // SpO2 percentage
  final double? bodyTempF;
  final int? respiratoryRate;          // Breaths per minute
  
  // Activity metrics
  final int? steps;
  final double? distanceMiles;
  final int? floorsClimbed;
  final int? activeMinutes;
  final int? caloriesBurned;           // Active calories
  final int? standingHours;            // Apple Watch rings
  
  // Stress & Recovery
  final int? stressLevel;              // 1-100 (Garmin, Whoop)
  final int? recoveryScore;            // 1-100 (Whoop)
  final int? bodyBattery;              // 1-100 (Garmin)
  final int? readinessScore;           // 1-100 (Oura)
  
  // Blood glucose (for CGM users)
  final int? bloodGlucose;             // mg/dL
  final GlucoseReadingType? glucoseType;
  
  // Notes
  final String? notes;
  final String? deviceId;              // Which device recorded this
}

enum HealthMetricSource {
  manual,
  appleHealth,
  googleFit,
  fitbit,
  garmin,
  whoop,
  oura,
  withingsScale,
  dexcomCGM,
  other;
}

enum GlucoseReadingType {
  fasting,
  preMeal,
  postMeal,
  random,
  continuous;
}
```

#### DailyHealthSummary (Daily Aggregate)

```dart
/// Daily health summary - aggregated from HealthMetrics
class DailyHealthSummary {
  final int? id;
  final int userId;
  final DateTime date;
  
  // Activity totals
  final int totalSteps;
  final double totalDistanceMiles;
  final int totalActiveMinutes;
  final int totalCaloriesBurned;
  final int standingHours;
  final int exerciseMinutes;
  
  // Heart averages
  final int? avgRestingHeartRate;
  final int? avgHrv;
  final int? minHeartRate;
  final int? maxHeartRate;
  
  // Goals completion
  final bool stepsGoalMet;
  final bool activeMinutesGoalMet;
  final bool standingGoalMet;
  final double activityRingCompletion;  // 0-100%
  
  // Wellness scores
  final int? stressScore;              // 1-100
  final int? recoveryScore;            // 1-100
  final int? readinessScore;           // 1-100
  
  // Weight (if weighed today)
  final double? morningWeight;
  
  // Sync info
  final DateTime? lastSyncedAt;
  final List<HealthMetricSource>? dataSources;
}
```

#### BodyMeasurement (Periodic Tracking)

```dart
/// Body measurements - tracked periodically (weekly/monthly)
class BodyMeasurement {
  final int? id;
  final int userId;
  final DateTime date;
  
  // Weight
  final double? weightLbs;
  final double? weightKg;
  final double? targetWeightLbs;
  final double? weightChangeSinceLast;
  
  // Body composition
  final double? bodyFatPercentage;
  final double? muscleMassLbs;
  final double? boneMassLbs;
  final double? waterPercentage;
  
  // Body measurements (inches)
  final double? chestInches;
  final double? waistInches;
  final double? hipsInches;
  final double? bicepInches;
  final double? thighInches;
  final double? neckInches;
  
  // Calculated
  final double? bmi;
  final double? waistToHipRatio;
  
  // Photos (for progress pics)
  final String? frontPhotoPath;
  final String? sidePhotoPath;
  final String? backPhotoPath;
  
  // Notes
  final String? notes;
  final MeasurementSource source;
}

enum MeasurementSource {
  manual,
  smartScale,
  dexa,
  bodpod,
  calipers;
}
```

#### HealthGoal (User's Health Targets)

```dart
/// User's health-related goals
class HealthGoal {
  final int? id;
  final int userId;
  
  // Daily activity goals
  final int dailyStepsGoal;            // e.g., 10000
  final int dailyActiveMinutesGoal;    // e.g., 30
  final int dailyStandingHoursGoal;    // e.g., 12
  final int dailyCaloriesBurnGoal;
  
  // Weight goals
  final double? targetWeightLbs;
  final double? startingWeightLbs;
  final DateTime? weightGoalDeadline;
  final WeightGoalType? weightGoalType;
  
  // Body comp goals
  final double? targetBodyFatPercentage;
  final double? targetMuscleMassLbs;
  
  // Sleep goals
  final int sleepHoursGoal;            // e.g., 8
  final String? targetBedTime;         // "22:30"
  final String? targetWakeTime;        // "06:30"
  
  // Water
  final int dailyWaterOzGoal;
  
  // Metadata
  final DateTime createdAt;
  final DateTime? updatedAt;
  final bool isActive;
}

enum WeightGoalType {
  lose,
  maintain,
  gain,
  recomp;
}
```

---

### 5.2 NOTIFICATIONS & REMINDERS

#### Reminder (Scheduled Notifications)

```dart
/// A scheduled reminder/notification
class Reminder {
  final int? id;
  final int userId;
  final String title;
  final String? body;
  final ReminderType type;
  
  // Timing
  final String scheduledTime;          // "HH:mm" format
  final List<int>? daysOfWeek;         // 1-7, null = every day
  final DateTime? specificDate;        // For one-time reminders
  
  // Recurrence
  final bool isRecurring;
  final RecurrencePattern? pattern;
  
  // Linking
  final int? supplementId;             // For dose reminders
  final int? habitId;                  // For habit reminders
  final int? sessionId;                // For scheduled sessions
  
  // Behavior
  final bool requiresConfirmation;     // User must tap to confirm action
  final String? confirmationAction;    // What happens on confirm
  final bool snoozeEnabled;
  final int snoozeDurationMinutes;
  
  // Status
  final bool isEnabled;
  final DateTime? lastFiredAt;
  final DateTime? nextFireAt;
  
  final DateTime createdAt;
}

enum ReminderType {
  dose,          // Take your supplements
  habit,         // Complete habit
  meditation,    // Time to meditate
  workout,       // Workout reminder
  meal,          // Meal/eating time
  water,         // Drink water
  sleep,         // Bedtime reminder
  wakeUp,        // Morning alarm
  custom;        // User-defined
}

enum RecurrencePattern {
  daily,
  weekdays,
  weekends,
  weekly,
  biweekly,
  monthly,
  custom;
}
```

#### NotificationLog (History)

```dart
/// Log of sent notifications
class NotificationLog {
  final int? id;
  final int userId;
  final int? reminderId;
  final String title;
  final String? body;
  final NotificationType type;
  
  // Timing
  final DateTime sentAt;
  final DateTime? interactedAt;
  
  // User response
  final NotificationResponse? response;
  final DateTime? snoozedUntil;
  
  // Result
  final int? linkedLogId;              // If action created a log entry
  final String? linkedLogType;         // "dose_log", "habit_log", etc.
}

enum NotificationType {
  reminder,
  achievement,
  streak,
  milestone,
  social,
  system;
}

enum NotificationResponse {
  tapped,
  dismissed,
  snoozed,
  actionTaken,   // User completed the action
  ignored;       // No interaction
}
```

---

### 6. DAILY SUMMARY & GAMIFICATION

#### DailyLog (Aggregate)

```dart
/// Daily summary aggregating all tracking
class DailyLog {
  final int? id;
  final DateTime date;                 // Just the date, no time
  
  // Counts
  final int dosesLogged;
  final int dosesScheduled;            // How many were supposed to take?
  final int workoutsCompleted;
  final int mealsLogged;
  final int meditationMinutes;
  final int journalEntries;
  
  // Macros totals
  final int? totalCalories;
  final int? totalProtein;
  
  // Sleep (from previous night)
  final int? sleepMinutes;
  final int? sleepQuality;
  
  // Scores (calculated)
  final double adherenceScore;         // 0-100: How well did they follow plan?
  final double wellnessScore;          // 0-100: Overall wellness
  
  // Mood tracking
  final int? morningMood;              // 1-10
  final int? eveningMood;              // 1-10
  final double? averageMood;
  
  // Links to character stats
  final int? characterStatsId;
  
  // Achievements unlocked today
  final List<String>? achievements;
  
  String? notes;
}
```

#### Updated CharacterStats

```dart
/// Enhanced character stats with more attributes
class CharacterStats {
  final int? id;
  final DateTime date;
  
  // Core attributes (0-100)
  final double strength;               // From workouts, physical
  final double endurance;              // From cardio, consistency
  final double intellect;              // From focus, learning
  final double spirit;                 // From meditation, mood
  final double discipline;             // From adherence, streaks
  final double recovery;               // From sleep, rest
  
  // XP System
  final int totalXP;
  final int todayXP;
  final int level;
  final int xpToNextLevel;
  
  // Streaks
  final int currentStreak;             // Days of hitting all goals
  final int longestStreak;
  
  // Multipliers (bonuses for consistency)
  final double xpMultiplier;           // 1.0 - 2.0x based on streaks
  
  // Titles/Ranks
  final String? title;                 // "Novice", "Adept", "Master"
  final String? specialization;        // Based on dominant stats
}
```

---

### 7. VOICE/AI PARSING

#### ParsedEntry (AI Output)

```dart
/// Result of AI parsing a voice transcription
class ParsedEntry {
  final int journalEntryId;            // Source transcription
  final DateTime parsedAt;
  final String modelUsed;              // "gpt-4", "claude-3"
  
  // Extracted entities
  final List<ParsedDose>? doses;
  final ParsedWorkout? workout;
  final ParsedMeal? meal;
  final ParsedMeditation? meditation;
  final ParsedSleep? sleep;
  final ParsedMood? mood;
  
  // Parsing metadata
  final double overallConfidence;
  final List<String>? ambiguities;     // Things AI wasn't sure about
  final String? rawResponse;           // Full AI response for debugging
  
  // User confirmation
  final bool userConfirmed;            // Did user approve the parsing?
  final DateTime? confirmedAt;
  final String? userCorrections;       // What did user change?
}

/// A dose extracted from voice
class ParsedDose {
  final String substanceName;          // Raw from transcription
  final int? matchedSupplementId;      // Matched to catalog
  final double? amountMg;
  final String? unit;
  final DoseTime? inferredTime;
  final double confidence;
}

/// A workout extracted from voice
class ParsedWorkout {
  final String description;
  final WorkoutType? type;
  final int? durationMinutes;
  final List<ParsedExercise>? exercises;
  final double confidence;
}

class ParsedExercise {
  final String exerciseName;
  final int? matchedExerciseId;
  final int? sets;
  final int? reps;
  final double? weight;
  final String? weightUnit;
  final double confidence;
}
```

---

### 8. ANALYTICS & PROGRESS

Models for calculating and displaying progress screens with charts and trends.

#### ProgressSnapshot (Point-in-Time Stats)

```dart
/// A snapshot of progress metrics at a point in time
/// Used to track changes over time
class ProgressSnapshot {
  final int? id;
  final int userId;
  final DateTime date;
  final ProgressPeriod period;         // daily, weekly, monthly
  
  // Meditation stats
  final int meditationSessions;
  final int meditationMinutes;
  final double avgSessionLength;
  final int meditationStreak;
  
  // Workout stats
  final int workoutsCompleted;
  final int workoutMinutes;
  final int caloriesBurned;
  final int personalRecords;
  
  // Habit stats
  final int habitsCompleted;
  final int habitsDue;
  final double habitCompletionRate;
  
  // Nutrition stats
  final int avgDailyCalories;
  final int avgDailyProtein;
  final int mealsLogged;
  
  // Supplement adherence
  final int dosesLogged;
  final int dosesScheduled;
  final double doseAdherenceRate;
  
  // Sleep stats
  final double avgSleepHours;
  final double avgSleepQuality;
  
  // Mood stats
  final double avgMoodScore;
  final MoodType dominantMood;
  
  // Overall
  final int totalXPEarned;
  final double wellnessScore;          // Composite 0-100
}

enum ProgressPeriod {
  daily,
  weekly,
  monthly,
  quarterly,
  yearly;
}
```

#### WeeklyProgress (Week View)

> âš ï¸ **COMPUTED MODEL** - This is computed at runtime from daily logs, not stored in database.

```dart
/// Progress data for a single week (for calendar views)
/// NOTE: Computed on-demand from DailyLog, HabitLog, etc.
class WeeklyProgress {
  final DateTime weekStartDate;        // Monday
  final DateTime weekEndDate;          // Sunday
  
  // Day-by-day breakdown
  final List<DayProgress> days;        // 7 DayProgress objects
  
  // Week totals
  final int totalMeditationMinutes;
  final int totalWorkoutMinutes;
  final int totalHabitsCompleted;
  final int totalXPEarned;
  
  // Streak info
  final int streakDays;                // Consecutive active days this week
  final bool weekCompleted;            // All 7 days active?
  
  // Comparison
  final double vsLastWeek;             // +/- percentage change
}

/// Single day's progress (for weekly calendar)
/// NOTE: Computed on-demand, not stored - builds from various logs
class DayProgress {
  final DateTime date;
  final int dayOfWeek;                 // 1 = Monday, 7 = Sunday
  
  // Activity indicators
  final bool hasMeditation;
  final bool hasWorkout;
  final bool habitsComplete;           // All habits done
  final bool dosesComplete;            // All doses taken
  
  // Metrics
  final int meditationMinutes;
  final int workoutMinutes;
  final int habitsCompleted;
  final int habitsDue;
  
  // Mood (if tracked)
  final MoodType? mood;
  
  // Visual indicator
  final DayStatus status;
}

enum DayStatus {
  perfect,       // All goals met
  good,          // Most goals met
  partial,       // Some activity
  missed,        // No activity (past day)
  upcoming;      // Future day
}
```

#### Streak (Gamification)

```dart
/// Tracks various streak types
class Streak {
  final int? id;
  final int userId;
  final StreakType type;               // What kind of streak
  
  // Current streak
  final int currentCount;              // Days in current streak
  final DateTime? streakStartDate;
  final DateTime? lastActivityDate;
  
  // Best streak
  final int longestCount;              // Personal best
  final DateTime? longestStartDate;
  final DateTime? longestEndDate;
  
  // Lifetime
  final int totalActiveDays;           // All-time count
}

enum StreakType {
  overall,          // Any activity
  meditation,
  workout,
  habits,
  doses,
  journaling;
}
```

#### Achievement (Badges/Milestones)

```dart
/// An achievement or badge that can be earned
class Achievement {
  final String id;                     // "meditation_7_day_streak"
  final String title;                  // "Week Warrior"
  final String description;            // "Complete 7 days of meditation"
  final String iconUrl;
  final String colorHex;
  final AchievementCategory category;
  final int xpReward;                  // XP earned
  
  // Requirements
  final AchievementRequirement requirement;
  final int targetValue;               // e.g., 7 for 7-day streak
  
  // Rarity
  final AchievementRarity rarity;
}

enum AchievementCategory {
  meditation,
  workout,
  habits,
  nutrition,
  sleep,
  social,
  milestones,
  special;
}

enum AchievementRarity {
  common,        // Easy to get
  uncommon,      // Some effort
  rare,          // Significant effort
  epic,          // Major milestone
  legendary;     // Exceptional
}

enum AchievementRequirement {
  streakDays,    // Consecutive days
  totalCount,    // Lifetime total
  singleSession, // In one session
  dailyGoal,     // Complete full day
  weeklyGoal;    // Complete full week
}

/// A user's earned achievement
class UserAchievement {
  final int? id;
  final int userId;
  final String achievementId;
  final DateTime earnedAt;
  final int? value;                    // Actual value when earned
  final bool hasBeenViewed;            // Show celebration once
  
  Achievement? achievement;            // Loaded separately
}
```

---

### 9. CALENDAR & SCHEDULING

Models for displaying and managing calendar views.

#### CalendarDay (Visual Calendar)

```dart
/// Represents a single day in calendar views
class CalendarDay {
  final DateTime date;
  final bool isToday;
  final bool isSelected;
  final bool isFutureDay;
  
  // Activity summary
  final List<CalendarActivity> activities;
  final int activityCount;
  
  // Visual indicators
  final bool hasAnyActivity;
  final bool allGoalsComplete;
  final String? primaryColor;          // Dominant activity color
  
  // Mood if tracked
  final MoodType? mood;
}

class CalendarActivity {
  final CalendarActivityType type;
  final String colorHex;
  final bool isCompleted;
  final String? label;                 // Optional text
}

enum CalendarActivityType {
  meditation,
  workout,
  dose,
  habit,
  sleep,
  meal,
  session;                             // Played content
}
```

#### ScheduledEvent (Planned Activities)

```dart
/// A scheduled/planned activity on the calendar
class ScheduledEvent {
  final int? id;
  final int userId;
  final DateTime date;
  final TimeOfDay? scheduledTime;
  
  // What's scheduled
  final ScheduledEventType type;
  final int? sessionId;                // If scheduling a session
  final int? workoutId;                // If scheduling a workout
  final int? habitId;                  // If habit-based
  final String? customTitle;           // For custom events
  
  // Recurrence
  final bool isRecurring;
  final RecurrencePattern? pattern;
  
  // Reminder
  final bool reminderEnabled;
  final int? reminderMinutesBefore;
  
  // Status
  final bool isCompleted;
  final DateTime? completedAt;
  
  // Notes
  final String? notes;
}

enum ScheduledEventType {
  meditationSession,
  workout,
  dose,
  habit,
  custom;
}

enum RecurrencePattern {
  daily,
  weekdays,
  weekends,
  weekly,
  biweekly,
  monthly;
}
```

---

## Database Schema

### New Tables Needed

```sql
-- Supplements catalog
CREATE TABLE supplements (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  brand TEXT,
  category TEXT NOT NULL,
  default_dose_mg REAL,
  unit TEXT DEFAULT 'mg',
  notes TEXT,
  is_active INTEGER DEFAULT 1,
  take_with_food INTEGER DEFAULT 0,
  take_with_fat INTEGER DEFAULT 0,
  max_daily_mg REAL,
  preferred_times TEXT,  -- JSON array
  interactions TEXT,     -- JSON array
  image_url TEXT,
  created_at TEXT NOT NULL
);

-- Dose logs
CREATE TABLE dose_logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  supplement_id INTEGER NOT NULL,
  timestamp TEXT NOT NULL,
  amount_mg REAL NOT NULL,
  unit TEXT,
  source TEXT NOT NULL,
  taken_with_food INTEGER,
  taken_with_fat INTEGER,
  meal_context TEXT,
  journal_entry_id INTEGER,
  confidence REAL,
  notes TEXT,
  FOREIGN KEY (supplement_id) REFERENCES supplements(id),
  FOREIGN KEY (journal_entry_id) REFERENCES journal_entries(id)
);

-- Dose schedules
CREATE TABLE dose_schedules (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  supplement_id INTEGER NOT NULL,
  amount_mg REAL NOT NULL,
  times TEXT NOT NULL,           -- JSON array
  days_of_week TEXT,             -- JSON array, null = every day
  is_active INTEGER DEFAULT 1,
  start_date TEXT,
  end_date TEXT,
  reminder_enabled INTEGER DEFAULT 1,
  created_at TEXT NOT NULL,
  FOREIGN KEY (supplement_id) REFERENCES supplements(id)
);

-- Exercise types catalog
CREATE TABLE exercise_types (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  category TEXT NOT NULL,
  primary_muscle TEXT,
  secondary_muscles TEXT,        -- JSON array
  equipment TEXT,
  instructions TEXT,
  video_url TEXT,
  image_url TEXT,
  is_compound INTEGER DEFAULT 0,
  is_custom INTEGER DEFAULT 0,
  created_at TEXT NOT NULL
);

-- Workout logs
CREATE TABLE workout_logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  start_time TEXT NOT NULL,
  end_time TEXT,
  duration_minutes INTEGER,
  type TEXT NOT NULL,
  name TEXT,
  source TEXT NOT NULL,
  location_name TEXT,
  latitude REAL,
  longitude REAL,
  calories_burned INTEGER,
  avg_heart_rate INTEGER,
  max_heart_rate INTEGER,
  perceived_effort INTEGER,
  energy_level INTEGER,
  mood TEXT,
  journal_entry_id INTEGER,
  notes TEXT,
  FOREIGN KEY (journal_entry_id) REFERENCES journal_entries(id)
);

-- Exercise sets (within workouts)
CREATE TABLE exercise_sets (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  workout_log_id INTEGER NOT NULL,
  exercise_type_id INTEGER NOT NULL,
  set_number INTEGER NOT NULL,
  set_type TEXT DEFAULT 'working',
  weight_lbs REAL,
  weight_kg REAL,
  reps INTEGER,
  target_reps INTEGER,
  rpe INTEGER,
  to_failure INTEGER DEFAULT 0,
  duration_seconds INTEGER,
  distance_miles REAL,
  distance_km REAL,
  calories_burned INTEGER,
  is_personal_record INTEGER DEFAULT 0,
  notes TEXT,
  FOREIGN KEY (workout_log_id) REFERENCES workout_logs(id),
  FOREIGN KEY (exercise_type_id) REFERENCES exercise_types(id)
);

-- Personal records
CREATE TABLE personal_records (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  exercise_type_id INTEGER NOT NULL,
  type TEXT NOT NULL,
  value REAL NOT NULL,
  unit TEXT NOT NULL,
  achieved_at TEXT NOT NULL,
  workout_log_id INTEGER,
  set_id INTEGER,
  bodyweight_lbs REAL,
  notes TEXT,
  FOREIGN KEY (exercise_type_id) REFERENCES exercise_types(id)
);

-- Meal logs
CREATE TABLE meal_logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  timestamp TEXT NOT NULL,
  type TEXT NOT NULL,
  description TEXT,
  source TEXT NOT NULL,
  calories INTEGER,
  protein_grams INTEGER,
  carbs_grams INTEGER,
  fat_grams INTEGER,
  fiber_grams INTEGER,
  protein_level TEXT,
  quality TEXT,
  location TEXT,
  homemade INTEGER DEFAULT 0,
  meal_prepped INTEGER DEFAULT 0,
  photo_path TEXT,
  journal_entry_id INTEGER,
  confidence REAL,
  notes TEXT,
  FOREIGN KEY (journal_entry_id) REFERENCES journal_entries(id)
);

-- Meal items (optional detail)
CREATE TABLE meal_items (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  meal_log_id INTEGER NOT NULL,
  name TEXT NOT NULL,
  serving_size REAL,
  serving_unit TEXT,
  calories INTEGER,
  protein_grams INTEGER,
  carbs_grams INTEGER,
  fat_grams INTEGER,
  barcode TEXT,
  brand_name TEXT,
  FOREIGN KEY (meal_log_id) REFERENCES meal_logs(id)
);

-- Meditation logs
CREATE TABLE meditation_logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  start_time TEXT NOT NULL,
  end_time TEXT,
  duration_minutes INTEGER NOT NULL,
  type TEXT NOT NULL,
  source TEXT NOT NULL,
  technique TEXT,
  guided_by TEXT,
  audio_track_name TEXT,
  location TEXT,
  timer_used INTEGER DEFAULT 0,
  guided_session INTEGER DEFAULT 0,
  focus_quality INTEGER,
  calm_before INTEGER,
  calm_after INTEGER,
  distraction_level INTEGER,
  insights TEXT,                 -- JSON array
  heart_rate_start INTEGER,
  heart_rate_end INTEGER,
  hrv_before INTEGER,
  hrv_after INTEGER,
  journal_entry_id INTEGER,
  notes TEXT,
  FOREIGN KEY (journal_entry_id) REFERENCES journal_entries(id)
);

-- Sleep logs
CREATE TABLE sleep_logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  bed_time TEXT NOT NULL,
  sleep_time TEXT,
  wake_time TEXT,
  out_of_bed_time TEXT,
  total_minutes INTEGER,
  time_to_fall_asleep_minutes INTEGER,
  times_woken INTEGER,
  quality_rating INTEGER,
  restfulness_rating INTEGER,
  deep_sleep_minutes INTEGER,
  rem_sleep_minutes INTEGER,
  light_sleep_minutes INTEGER,
  awake_minutes INTEGER,
  alcohol_consumed INTEGER,
  caffeine_afternoon INTEGER,
  screen_before_bed INTEGER,
  exercised_today INTEGER,
  stress_level INTEGER,
  room_temp_f INTEGER,
  dark_room INTEGER,
  white_noise INTEGER,
  source TEXT NOT NULL,
  journal_entry_id INTEGER,
  notes TEXT,
  FOREIGN KEY (journal_entry_id) REFERENCES journal_entries(id)
);

-- Daily aggregates
CREATE TABLE daily_logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  date TEXT NOT NULL UNIQUE,
  doses_logged INTEGER DEFAULT 0,
  doses_scheduled INTEGER DEFAULT 0,
  workouts_completed INTEGER DEFAULT 0,
  meals_logged INTEGER DEFAULT 0,
  meditation_minutes INTEGER DEFAULT 0,
  journal_entries INTEGER DEFAULT 0,
  total_calories INTEGER,
  total_protein INTEGER,
  sleep_minutes INTEGER,
  sleep_quality INTEGER,
  adherence_score REAL,
  wellness_score REAL,
  morning_mood INTEGER,
  evening_mood INTEGER,
  average_mood REAL,
  character_stats_id INTEGER,
  achievements TEXT,             -- JSON array
  notes TEXT,
  FOREIGN KEY (character_stats_id) REFERENCES character_stats(id)
);

-- =====================
-- NEW TABLES FOR CONTENT, MOODS, HABITS, PROGRESS
-- =====================

-- User profiles
CREATE TABLE user_profiles (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  firebase_uid TEXT,
  name TEXT NOT NULL,
  email TEXT,
  avatar_url TEXT,
  avatar_local_path TEXT,
  level INTEGER DEFAULT 1,
  total_xp INTEGER DEFAULT 0,
  current_streak INTEGER DEFAULT 0,
  longest_streak INTEGER DEFAULT 0,
  title TEXT,
  timezone TEXT,
  uses_metric INTEGER DEFAULT 0,
  wake_up_time TEXT,
  bed_time TEXT,
  is_premium INTEGER DEFAULT 0,
  premium_expires_at TEXT,
  has_completed_onboarding INTEGER DEFAULT 0,
  goals TEXT,                    -- JSON array
  focus_areas TEXT,              -- JSON array
  created_at TEXT NOT NULL,
  last_active_at TEXT
);

-- Content categories
CREATE TABLE content_categories (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  slug TEXT,
  description TEXT,
  icon_name TEXT,
  icon_url TEXT,
  color_hex TEXT NOT NULL,
  sort_order INTEGER DEFAULT 0,
  is_active INTEGER DEFAULT 1,
  content_type TEXT NOT NULL,
  parent_category_id INTEGER,
  FOREIGN KEY (parent_category_id) REFERENCES content_categories(id)
);

-- Instructors
CREATE TABLE instructors (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  title TEXT,
  bio TEXT,
  short_bio TEXT,
  avatar_url TEXT,
  cover_image_url TEXT,
  certifications TEXT,           -- JSON array
  years_experience INTEGER,
  instagram_handle TEXT,
  website_url TEXT,
  sessions_count INTEGER DEFAULT 0,
  followers_count INTEGER DEFAULT 0,
  average_rating REAL,
  is_featured INTEGER DEFAULT 0,
  is_active INTEGER DEFAULT 1,
  created_at TEXT NOT NULL
);

-- Sessions (meditation, yoga, workout content)
CREATE TABLE sessions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  subtitle TEXT,
  short_description TEXT NOT NULL,
  long_description TEXT,
  thumbnail_url TEXT,
  cover_image_url TEXT,
  audio_url TEXT,
  video_url TEXT,
  preview_url TEXT,
  duration_seconds INTEGER NOT NULL,
  duration_display TEXT NOT NULL,
  category_id INTEGER,
  instructor_id INTEGER,
  program_id INTEGER,
  lesson_number INTEGER,
  difficulty TEXT DEFAULT 'beginner',
  is_guided INTEGER DEFAULT 1,
  is_free INTEGER DEFAULT 1,
  is_featured INTEGER DEFAULT 0,
  is_downloadable INTEGER DEFAULT 0,
  tags TEXT,                     -- JSON array
  benefits TEXT,                 -- JSON array
  requirements TEXT,             -- JSON array
  calorie_estimate INTEGER,
  target_mood TEXT,
  play_count INTEGER DEFAULT 0,
  completion_count INTEGER DEFAULT 0,
  average_rating REAL,
  rating_count INTEGER DEFAULT 0,
  published_at TEXT NOT NULL,
  updated_at TEXT,
  is_active INTEGER DEFAULT 1,
  sort_order INTEGER DEFAULT 0,
  FOREIGN KEY (category_id) REFERENCES content_categories(id),
  FOREIGN KEY (instructor_id) REFERENCES instructors(id),
  FOREIGN KEY (program_id) REFERENCES programs(id)
);

-- Programs (multi-session courses)
CREATE TABLE programs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  subtitle TEXT,
  short_description TEXT NOT NULL,
  long_description TEXT,
  thumbnail_url TEXT,
  cover_image_url TEXT,
  promo_video_url TEXT,
  total_lessons INTEGER NOT NULL,
  total_duration_minutes INTEGER NOT NULL,
  duration_days INTEGER NOT NULL,
  pace TEXT DEFAULT 'daily',
  category_id INTEGER,
  instructor_id INTEGER,
  difficulty TEXT DEFAULT 'beginner',
  is_free INTEGER DEFAULT 1,
  is_featured INTEGER DEFAULT 0,
  learning_outcomes TEXT,        -- JSON array
  requirements TEXT,             -- JSON array
  target_audience TEXT,
  enrollment_count INTEGER DEFAULT 0,
  completion_count INTEGER DEFAULT 0,
  average_rating REAL,
  rating_count INTEGER DEFAULT 0,
  xp_reward INTEGER DEFAULT 0,
  badge_id TEXT,
  published_at TEXT NOT NULL,
  is_active INTEGER DEFAULT 1,
  FOREIGN KEY (category_id) REFERENCES content_categories(id),
  FOREIGN KEY (instructor_id) REFERENCES instructors(id)
);

-- Play history
CREATE TABLE play_history (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  session_id INTEGER NOT NULL,
  started_at TEXT NOT NULL,
  ended_at TEXT,
  progress_seconds INTEGER DEFAULT 0,
  completion_percentage REAL DEFAULT 0,
  is_completed INTEGER DEFAULT 0,
  device_type TEXT,
  was_offline INTEGER DEFAULT 0,
  pause_count INTEGER DEFAULT 0,
  total_seconds_played INTEGER DEFAULT 0,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  FOREIGN KEY (session_id) REFERENCES sessions(id)
);

-- Favorites
CREATE TABLE favorites (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  favorite_type TEXT NOT NULL,   -- 'session' or 'program'
  item_id INTEGER NOT NULL,
  created_at TEXT NOT NULL,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id)
);

-- Program enrollments
CREATE TABLE program_enrollments (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  program_id INTEGER NOT NULL,
  enrolled_at TEXT NOT NULL,
  completed_at TEXT,
  lessons_completed INTEGER DEFAULT 0,
  current_lesson_number INTEGER DEFAULT 1,
  last_activity_at TEXT,
  completion_percentage REAL DEFAULT 0,
  status TEXT DEFAULT 'active',
  xp_earned INTEGER DEFAULT 0,
  badge_awarded INTEGER DEFAULT 0,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  FOREIGN KEY (program_id) REFERENCES programs(id)
);

-- Mood entries
CREATE TABLE mood_entries (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  timestamp TEXT NOT NULL,
  mood TEXT NOT NULL,
  intensity INTEGER,
  secondary_moods TEXT,          -- JSON array
  factors TEXT,                  -- JSON array
  notes TEXT,
  check_in_type TEXT DEFAULT 'manual',
  linked_session_id INTEGER,
  linked_workout_id INTEGER,
  journal_entry_id INTEGER,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  FOREIGN KEY (linked_session_id) REFERENCES sessions(id),
  FOREIGN KEY (journal_entry_id) REFERENCES journal_entries(id)
);

-- Habits
CREATE TABLE habits (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  title TEXT NOT NULL,
  description TEXT,
  emoji TEXT,
  color_hex TEXT,
  category TEXT NOT NULL,
  custom_category TEXT,
  frequency TEXT DEFAULT 'daily',
  days_of_week TEXT,             -- JSON array
  times_per_day INTEGER,
  times_per_week INTEGER,
  reminder_time TEXT,
  reminder_enabled INTEGER DEFAULT 0,
  target_time TEXT,
  is_time_sensitive INTEGER DEFAULT 0,
  habit_type TEXT DEFAULT 'boolean',
  target_count INTEGER,
  target_minutes INTEGER,
  xp_per_completion INTEGER DEFAULT 10,
  created_at TEXT NOT NULL,
  is_active INTEGER DEFAULT 1,
  is_archived INTEGER DEFAULT 0,
  sort_order INTEGER DEFAULT 0,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id)
);

-- Habit logs
CREATE TABLE habit_logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  habit_id INTEGER NOT NULL,
  date TEXT NOT NULL,
  completed_at TEXT,
  is_completed INTEGER DEFAULT 0,
  count INTEGER,
  duration_minutes INTEGER,
  notes TEXT,
  status TEXT DEFAULT 'pending',
  journal_entry_id INTEGER,
  FOREIGN KEY (habit_id) REFERENCES habits(id),
  FOREIGN KEY (journal_entry_id) REFERENCES journal_entries(id)
);

-- Streaks
CREATE TABLE streaks (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  streak_type TEXT NOT NULL,
  current_count INTEGER DEFAULT 0,
  streak_start_date TEXT,
  last_activity_date TEXT,
  longest_count INTEGER DEFAULT 0,
  longest_start_date TEXT,
  longest_end_date TEXT,
  total_active_days INTEGER DEFAULT 0,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id)
);

-- Achievements (definitions)
CREATE TABLE achievements (
  id TEXT PRIMARY KEY,
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  icon_url TEXT,
  color_hex TEXT,
  category TEXT NOT NULL,
  xp_reward INTEGER DEFAULT 0,
  requirement_type TEXT NOT NULL,
  target_value INTEGER NOT NULL,
  rarity TEXT DEFAULT 'common'
);

-- User achievements (earned)
CREATE TABLE user_achievements (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  achievement_id TEXT NOT NULL,
  earned_at TEXT NOT NULL,
  value INTEGER,
  has_been_viewed INTEGER DEFAULT 0,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  FOREIGN KEY (achievement_id) REFERENCES achievements(id)
);

-- Scheduled events
CREATE TABLE scheduled_events (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  date TEXT NOT NULL,
  scheduled_time TEXT,
  event_type TEXT NOT NULL,
  session_id INTEGER,
  workout_id INTEGER,
  habit_id INTEGER,
  custom_title TEXT,
  is_recurring INTEGER DEFAULT 0,
  recurrence_pattern TEXT,
  reminder_enabled INTEGER DEFAULT 0,
  reminder_minutes_before INTEGER,
  is_completed INTEGER DEFAULT 0,
  completed_at TEXT,
  notes TEXT,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  FOREIGN KEY (session_id) REFERENCES sessions(id)
);

-- =====================
-- MISSING TABLES - Session Ratings, Lesson Progress, AI Parsing
-- =====================

-- Session ratings/reviews
CREATE TABLE session_ratings (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  session_id INTEGER NOT NULL,
  rating INTEGER NOT NULL,           -- 1-5 stars
  review TEXT,
  created_at TEXT NOT NULL,
  is_public INTEGER DEFAULT 1,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  FOREIGN KEY (session_id) REFERENCES sessions(id),
  UNIQUE(user_id, session_id)        -- One rating per user per session
);

-- Lesson progress within programs
CREATE TABLE lesson_progress (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  enrollment_id INTEGER NOT NULL,
  session_id INTEGER NOT NULL,
  lesson_number INTEGER NOT NULL,
  is_completed INTEGER DEFAULT 0,
  completed_at TEXT,
  duration_watched INTEGER DEFAULT 0,
  FOREIGN KEY (enrollment_id) REFERENCES program_enrollments(id),
  FOREIGN KEY (session_id) REFERENCES sessions(id)
);

-- AI parsed entries from voice transcription
CREATE TABLE parsed_entries (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  journal_entry_id INTEGER NOT NULL,
  parsed_at TEXT NOT NULL,
  model_used TEXT NOT NULL,          -- "gpt-4", "claude-3"
  overall_confidence REAL NOT NULL,
  ambiguities TEXT,                  -- JSON array
  raw_response TEXT,                 -- Full AI response
  user_confirmed INTEGER DEFAULT 0,
  confirmed_at TEXT,
  user_corrections TEXT,
  FOREIGN KEY (journal_entry_id) REFERENCES journal_entries(id)
);

-- Parsed doses from voice
CREATE TABLE parsed_doses (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  parsed_entry_id INTEGER NOT NULL,
  substance_name TEXT NOT NULL,      -- Raw from transcription
  matched_supplement_id INTEGER,     -- FK if matched
  amount_mg REAL,
  unit TEXT,
  inferred_time TEXT,
  confidence REAL NOT NULL,
  FOREIGN KEY (parsed_entry_id) REFERENCES parsed_entries(id),
  FOREIGN KEY (matched_supplement_id) REFERENCES supplements(id)
);

-- Parsed workouts from voice
CREATE TABLE parsed_workouts (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  parsed_entry_id INTEGER NOT NULL,
  description TEXT NOT NULL,
  workout_type TEXT,
  duration_minutes INTEGER,
  confidence REAL NOT NULL,
  FOREIGN KEY (parsed_entry_id) REFERENCES parsed_entries(id)
);

-- Parsed exercises within workouts
CREATE TABLE parsed_exercises (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  parsed_workout_id INTEGER NOT NULL,
  exercise_name TEXT NOT NULL,
  matched_exercise_id INTEGER,       -- FK if matched
  sets INTEGER,
  reps INTEGER,
  weight REAL,
  weight_unit TEXT,
  confidence REAL NOT NULL,
  FOREIGN KEY (parsed_workout_id) REFERENCES parsed_workouts(id),
  FOREIGN KEY (matched_exercise_id) REFERENCES exercise_types(id)
);

-- =====================
-- NUTRITION TABLES
-- =====================

-- Daily nutrition aggregates
CREATE TABLE daily_nutrition (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  date TEXT NOT NULL,
  calories_eaten INTEGER DEFAULT 0,
  calories_burned INTEGER DEFAULT 0,
  calorie_goal INTEGER,
  calorie_balance INTEGER,
  protein_grams INTEGER DEFAULT 0,
  carbs_grams INTEGER DEFAULT 0,
  fat_grams INTEGER DEFAULT 0,
  fiber_grams INTEGER DEFAULT 0,
  protein_target INTEGER,
  carbs_target INTEGER,
  fat_target INTEGER,
  fiber_target INTEGER,
  meals_logged INTEGER DEFAULT 0,
  snacks_logged INTEGER DEFAULT 0,
  water_oz INTEGER DEFAULT 0,
  water_target INTEGER,
  adherence_score REAL,
  grade TEXT,
  last_updated_at TEXT,
  is_manual_override INTEGER DEFAULT 0,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  UNIQUE(user_id, date)
);

-- Nutrition goals
CREATE TABLE nutrition_goals (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  effective_date TEXT NOT NULL,
  daily_calorie_target INTEGER NOT NULL,
  goal_type TEXT NOT NULL,           -- lose, maintain, gain, recomp
  weekly_weight_change_target REAL,
  protein_percentage INTEGER NOT NULL,
  carbs_percentage INTEGER NOT NULL,
  fat_percentage INTEGER NOT NULL,
  protein_grams INTEGER NOT NULL,
  carbs_grams INTEGER NOT NULL,
  fat_grams INTEGER NOT NULL,
  fiber_grams INTEGER,
  water_oz INTEGER,
  sodium_mg INTEGER,
  sugar_grams INTEGER,
  activity_level TEXT NOT NULL,
  bmr REAL,
  tdee REAL,
  created_at TEXT NOT NULL,
  is_active INTEGER DEFAULT 1,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id)
);

-- =====================
-- HEALTH METRICS TABLES
-- =====================

-- Health metrics readings
CREATE TABLE health_metrics (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  timestamp TEXT NOT NULL,
  source TEXT NOT NULL,
  resting_heart_rate INTEGER,
  current_heart_rate INTEGER,
  max_heart_rate INTEGER,
  hrv INTEGER,
  weight_lbs REAL,
  weight_kg REAL,
  body_fat_percentage REAL,
  muscle_mass_lbs REAL,
  water_percentage REAL,
  bone_mass_lbs REAL,
  visceral_fat REAL,
  systolic_bp INTEGER,
  diastolic_bp INTEGER,
  blood_oxygen REAL,
  body_temp_f REAL,
  respiratory_rate INTEGER,
  steps INTEGER,
  distance_miles REAL,
  floors_climbed INTEGER,
  active_minutes INTEGER,
  calories_burned INTEGER,
  standing_hours INTEGER,
  stress_level INTEGER,
  recovery_score INTEGER,
  body_battery INTEGER,
  readiness_score INTEGER,
  blood_glucose INTEGER,
  glucose_type TEXT,
  notes TEXT,
  device_id TEXT,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id)
);

-- Daily health summary
CREATE TABLE daily_health_summary (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  date TEXT NOT NULL,
  total_steps INTEGER DEFAULT 0,
  total_distance_miles REAL DEFAULT 0,
  total_active_minutes INTEGER DEFAULT 0,
  total_calories_burned INTEGER DEFAULT 0,
  standing_hours INTEGER DEFAULT 0,
  exercise_minutes INTEGER DEFAULT 0,
  avg_resting_heart_rate INTEGER,
  avg_hrv INTEGER,
  min_heart_rate INTEGER,
  max_heart_rate INTEGER,
  steps_goal_met INTEGER DEFAULT 0,
  active_minutes_goal_met INTEGER DEFAULT 0,
  standing_goal_met INTEGER DEFAULT 0,
  activity_ring_completion REAL DEFAULT 0,
  stress_score INTEGER,
  recovery_score INTEGER,
  readiness_score INTEGER,
  morning_weight REAL,
  last_synced_at TEXT,
  data_sources TEXT,                 -- JSON array
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  UNIQUE(user_id, date)
);

-- Body measurements
CREATE TABLE body_measurements (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  date TEXT NOT NULL,
  weight_lbs REAL,
  weight_kg REAL,
  target_weight_lbs REAL,
  weight_change_since_last REAL,
  body_fat_percentage REAL,
  muscle_mass_lbs REAL,
  bone_mass_lbs REAL,
  water_percentage REAL,
  chest_inches REAL,
  waist_inches REAL,
  hips_inches REAL,
  bicep_inches REAL,
  thigh_inches REAL,
  neck_inches REAL,
  bmi REAL,
  waist_to_hip_ratio REAL,
  front_photo_path TEXT,
  side_photo_path TEXT,
  back_photo_path TEXT,
  notes TEXT,
  source TEXT NOT NULL,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id)
);

-- Health goals
CREATE TABLE health_goals (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  daily_steps_goal INTEGER DEFAULT 10000,
  daily_active_minutes_goal INTEGER DEFAULT 30,
  daily_standing_hours_goal INTEGER DEFAULT 12,
  daily_calories_burn_goal INTEGER,
  target_weight_lbs REAL,
  starting_weight_lbs REAL,
  weight_goal_deadline TEXT,
  weight_goal_type TEXT,
  target_body_fat_percentage REAL,
  target_muscle_mass_lbs REAL,
  sleep_hours_goal INTEGER DEFAULT 8,
  target_bed_time TEXT,
  target_wake_time TEXT,
  daily_water_oz_goal INTEGER DEFAULT 64,
  created_at TEXT NOT NULL,
  updated_at TEXT,
  is_active INTEGER DEFAULT 1,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id)
);

-- =====================
-- NOTIFICATION TABLES
-- =====================

-- Reminders
CREATE TABLE reminders (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  title TEXT NOT NULL,
  body TEXT,
  reminder_type TEXT NOT NULL,
  scheduled_time TEXT NOT NULL,
  days_of_week TEXT,                 -- JSON array
  specific_date TEXT,
  is_recurring INTEGER DEFAULT 1,
  recurrence_pattern TEXT,
  supplement_id INTEGER,
  habit_id INTEGER,
  session_id INTEGER,
  requires_confirmation INTEGER DEFAULT 0,
  confirmation_action TEXT,
  snooze_enabled INTEGER DEFAULT 1,
  snooze_duration_minutes INTEGER DEFAULT 10,
  is_enabled INTEGER DEFAULT 1,
  last_fired_at TEXT,
  next_fire_at TEXT,
  created_at TEXT NOT NULL,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  FOREIGN KEY (supplement_id) REFERENCES supplements(id),
  FOREIGN KEY (habit_id) REFERENCES habits(id),
  FOREIGN KEY (session_id) REFERENCES sessions(id)
);

-- Notification log
CREATE TABLE notification_logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  reminder_id INTEGER,
  title TEXT NOT NULL,
  body TEXT,
  notification_type TEXT NOT NULL,
  sent_at TEXT NOT NULL,
  interacted_at TEXT,
  response TEXT,
  snoozed_until TEXT,
  linked_log_id INTEGER,
  linked_log_type TEXT,
  FOREIGN KEY (user_id) REFERENCES user_profiles(id),
  FOREIGN KEY (reminder_id) REFERENCES reminders(id)
);

-- Create additional indexes
CREATE INDEX idx_play_history_user ON play_history(user_id);
CREATE INDEX idx_play_history_session ON play_history(session_id);
CREATE INDEX idx_favorites_user ON favorites(user_id);
CREATE INDEX idx_mood_entries_user ON mood_entries(user_id);
CREATE INDEX idx_mood_entries_timestamp ON mood_entries(timestamp);
CREATE INDEX idx_habits_user ON habits(user_id);
CREATE INDEX idx_habit_logs_habit ON habit_logs(habit_id);
CREATE INDEX idx_habit_logs_date ON habit_logs(date);
CREATE INDEX idx_streaks_user ON streaks(user_id);
CREATE INDEX idx_user_achievements_user ON user_achievements(user_id);
CREATE INDEX idx_scheduled_events_user ON scheduled_events(user_id);
CREATE INDEX idx_scheduled_events_date ON scheduled_events(date);
CREATE INDEX idx_sessions_category ON sessions(category_id);
CREATE INDEX idx_sessions_instructor ON sessions(instructor_id);
CREATE INDEX idx_programs_category ON programs(category_id);
```

---

## Implementation Priority (Updated)

### Phase 1: Core Models (Foundation)
Priority: **CRITICAL** - Need these before any UI

1. âœ… UserProfile - Enhanced user with level, streak, XP
2. ğŸ”¨ Supplement + DoseLog - Your vitamin/supplement stack
3. ğŸ”¨ Habit + HabitLog - Daily to-do/habit tracking
4. ğŸ”¨ MoodEntry - Mood check-ins
5. ğŸ”¨ Streak - Streak tracking (generic)

### Phase 2: Content Models (What Users Consume)
Priority: **HIGH** - For session/meditation UI

1. ContentCategory - Organize content
2. Instructor - Content creators
3. Session - Meditation sessions, workouts
4. Program - Multi-day challenges/courses
5. PlayHistory - Track what user played
6. Favorite - Bookmarks

### Phase 3: Detailed Tracking (Rich Data)
Priority: **MEDIUM** - For analytics screens

1. WorkoutLog + ExerciseSet - Detailed workout tracking
2. MealLog + MealItem - Nutrition tracking
3. SleepLog - Sleep tracking
4. MeditationLog - Session log (not content)
5. PersonalRecord - PRs

### Phase 4: Analytics & Gamification
Priority: **MEDIUM** - Progress screens

1. ProgressSnapshot - Weekly/monthly stats
2. DailyLog - Daily aggregates
3. Achievement + UserAchievement - Badges
4. CharacterStats - RPG stats

### Phase 5: Scheduling & AI
Priority: **LOWER** - Advanced features

1. DoseSchedule - Reminders
2. ScheduledEvent - Calendar
3. ProgramEnrollment - Course progress
4. ParsedEntry - AI voice parsing

---

## Model Summary Count

| Category | Models | Tables |
|----------|--------|--------|
| User & Profile | 2 | 2 |
| Content & Sessions | 5 | 5 |
| User Activity | 5 | 5 |
| Mood & Emotions | 2 | 1 |
| Habits & Tasks | 3 | 2 |
| Supplements & Doses | 3 | 3 |
| Workouts & Gym | 4 | 4 |
| Meals & Nutrition | 4 | 4 |
| Meditation | 2 | 1 |
| Sleep | 1 | 1 |
| Health & Biometrics | 4 | 4 |
| Notifications | 2 | 2 |
| Analytics & Progress | 4 | 3 |
| Gamification | 3 | 3 |
| Calendar & Scheduling | 2 | 1 |
| AI Parsing | 4 | 4 |
| **TOTAL** | **~50 models** | **~45 tables** |

---

## Data Entry UX Mapping

| Action | Manual Entry | Voice Entry | Auto Entry |
|--------|--------------|-------------|------------|
| Log dose | Tap supplement button | "I took my vitamin D" | Confirm reminder |
| Log workout | Quick button + timer | "Did chest day, bench 225 for 5" | Apple Watch import |
| Log meal | Quick protein level | "Had chicken and rice for lunch" | Photo analysis |
| Log meditation | Timer completion | "Did 10 min meditation" | Headspace sync |
| Log sleep | Morning form | "Slept 7 hours, woke up twice" | Oura Ring import |
| Log mood | Emoji tap | "Feeling stressed today" | Post-session prompt |
| Complete habit | Checkbox tap | "Did my morning routine" | Time-based auto |
| Play session | Play button tap | "Play morning meditation" | Scheduled auto-play |

---

## UI â†” Model Mapping

| UI Element | Required Models |
|------------|-----------------|
| Week calendar strip | CalendarDay, DayProgress |
| Mood check-in card | MoodEntry, MoodType enum |
| Progress bar chart | WeeklyProgress, ProgressSnapshot |
| Streak badge | Streak |
| Session card | Session, Instructor |
| Recently played | PlayHistory, Session |
| Favorites section | Favorite, Session |
| Habit checklist | Habit, HabitLog |
| Challenge card | Program, ProgramEnrollment |
| Level/XP display | UserProfile |
| Achievement popup | Achievement, UserAchievement |
| Dose reminder | Supplement, DoseSchedule, Reminder |
| Nutrition macros | MealLog, DailyNutrition, NutritionGoal |
| Health stats card | HealthMetrics, DailyHealthSummary |
| Body progress | BodyMeasurement, HealthGoal |
| Notification history | NotificationLog, Reminder |

---

## Computed vs Stored Models

Some models are computed at runtime and not stored in the database:

| Model | Type | Notes |
|-------|------|-------|
| MoodTrend | **Computed** | Aggregated from MoodEntry on-demand |
| WeeklyProgress | **Computed** | Built from daily logs at runtime |
| DayProgress | **Computed** | Built from various logs for calendar view |
| CalendarDay | **Computed** | Assembled for calendar display |
| DailyNutrition | **Cached** | Can be computed or cached for performance |
| DailyHealthSummary | **Cached** | Aggregated from HealthMetrics, cached daily |
| ProgressSnapshot | **Stored** | Periodic snapshots for historical charts |
| All *Log models | **Stored** | Primary data - must be persisted |
| All *Entry models | **Stored** | Primary data - must be persisted |

---

## Model â†’ File Mapping

Proposed file structure for implementing these models:

```
lib/models/
â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ user_profile.dart              # UserProfile, UserSettings
â”‚   â””â”€â”€ user_preferences.dart          # Settings enums
â”‚
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ content_category.dart          # ContentCategory, ContentType
â”‚   â”œâ”€â”€ instructor.dart                # Instructor
â”‚   â”œâ”€â”€ session.dart                   # Session, SessionDifficulty
â”‚   â”œâ”€â”€ program.dart                   # Program, ProgramPace, ProgramDifficulty
â”‚   â””â”€â”€ session_rating.dart            # SessionRating
â”‚
â”œâ”€â”€ activity/
â”‚   â”œâ”€â”€ play_history.dart              # PlayHistory
â”‚   â”œâ”€â”€ favorite.dart                  # Favorite, FavoriteType
â”‚   â”œâ”€â”€ program_enrollment.dart        # ProgramEnrollment, LessonProgress
â”‚   â””â”€â”€ activity_enums.dart            # Shared activity enums
â”‚
â”œâ”€â”€ tracking/
â”‚   â”œâ”€â”€ supplement.dart                # Supplement, SupplementCategory, DoseTime
â”‚   â”œâ”€â”€ dose_log.dart                  # DoseLog, DoseSource
â”‚   â”œâ”€â”€ dose_schedule.dart             # DoseSchedule
â”‚   â”œâ”€â”€ workout_log.dart               # WorkoutLog, WorkoutType, WorkoutSource
â”‚   â”œâ”€â”€ exercise_type.dart             # ExerciseType, ExerciseCategory, MuscleGroup
â”‚   â”œâ”€â”€ exercise_set.dart              # ExerciseSet, SetType
â”‚   â”œâ”€â”€ personal_record.dart           # PersonalRecord, PRType
â”‚   â”œâ”€â”€ meal_log.dart                  # MealLog, MealType, MealSource
â”‚   â”œâ”€â”€ meal_item.dart                 # MealItem
â”‚   â”œâ”€â”€ meditation_log.dart            # MeditationLog, MeditationType
â”‚   â”œâ”€â”€ sleep_log.dart                 # SleepLog, SleepSource
â”‚   â””â”€â”€ tracking_enums.dart            # Shared tracking enums
â”‚
â”œâ”€â”€ mood/
â”‚   â”œâ”€â”€ mood_entry.dart                # MoodEntry, MoodType, MoodCheckInType
â”‚   â””â”€â”€ mood_trend.dart                # MoodTrend (computed helper)
â”‚
â”œâ”€â”€ habits/
â”‚   â”œâ”€â”€ habit.dart                     # Habit, HabitCategory, HabitFrequency
â”‚   â”œâ”€â”€ habit_log.dart                 # HabitLog, HabitLogStatus
â”‚   â””â”€â”€ daily_habit_summary.dart       # DailyHabitSummary (computed helper)
â”‚
â”œâ”€â”€ nutrition/
â”‚   â”œâ”€â”€ daily_nutrition.dart           # DailyNutrition, NutritionGrade
â”‚   â””â”€â”€ nutrition_goal.dart            # NutritionGoal, ActivityLevel
â”‚
â”œâ”€â”€ health/
â”‚   â”œâ”€â”€ health_metrics.dart            # HealthMetrics, HealthMetricSource
â”‚   â”œâ”€â”€ daily_health_summary.dart      # DailyHealthSummary
â”‚   â”œâ”€â”€ body_measurement.dart          # BodyMeasurement
â”‚   â””â”€â”€ health_goal.dart               # HealthGoal, WeightGoalType
â”‚
â”œâ”€â”€ gamification/
â”‚   â”œâ”€â”€ character_stats.dart           # CharacterStats (updated)
â”‚   â”œâ”€â”€ daily_log.dart                 # DailyLog
â”‚   â”œâ”€â”€ streak.dart                    # Streak, StreakType
â”‚   â”œâ”€â”€ achievement.dart               # Achievement, UserAchievement
â”‚   â””â”€â”€ achievement_enums.dart         # AchievementCategory, Rarity, etc.
â”‚
â”œâ”€â”€ analytics/
â”‚   â”œâ”€â”€ progress_snapshot.dart         # ProgressSnapshot, ProgressPeriod
â”‚   â”œâ”€â”€ weekly_progress.dart           # WeeklyProgress, DayProgress (computed)
â”‚   â””â”€â”€ calendar_day.dart              # CalendarDay, CalendarActivity
â”‚
â”œâ”€â”€ notifications/
â”‚   â”œâ”€â”€ reminder.dart                  # Reminder, ReminderType, RecurrencePattern
â”‚   â””â”€â”€ notification_log.dart          # NotificationLog, NotificationResponse
â”‚
â”œâ”€â”€ ai/
â”‚   â”œâ”€â”€ parsed_entry.dart              # ParsedEntry
â”‚   â”œâ”€â”€ parsed_dose.dart               # ParsedDose
â”‚   â”œâ”€â”€ parsed_workout.dart            # ParsedWorkout, ParsedExercise
â”‚   â””â”€â”€ parsed_meal.dart               # ParsedMeal
â”‚
â”œâ”€â”€ calendar/
â”‚   â”œâ”€â”€ calendar_day.dart              # CalendarDay, CalendarActivityType
â”‚   â””â”€â”€ scheduled_event.dart           # ScheduledEvent, ScheduledEventType
â”‚
â””â”€â”€ legacy/
    â”œâ”€â”€ protocol_entry.dart            # Existing ProtocolEntry (to be deprecated)
    â”œâ”€â”€ journal_entry.dart             # Existing JournalEntry
    â””â”€â”€ mantra.dart                    # Existing Mantra
```

---

## Database Migration Strategy

When implementing, migrations should be created in phases:

### Migration 1: Core Tables (Phase 1)
```sql
-- Run first
CREATE TABLE user_profiles (...);
CREATE TABLE supplements (...);
CREATE TABLE dose_logs (...);
CREATE TABLE habits (...);
CREATE TABLE habit_logs (...);
CREATE TABLE mood_entries (...);
CREATE TABLE streaks (...);
```

### Migration 2: Content Tables (Phase 2)
```sql
CREATE TABLE content_categories (...);
CREATE TABLE instructors (...);
CREATE TABLE sessions (...);
CREATE TABLE programs (...);
CREATE TABLE play_history (...);
CREATE TABLE favorites (...);
```

### Migration 3: Detailed Tracking (Phase 3)
```sql
CREATE TABLE exercise_types (...);
CREATE TABLE workout_logs (...);
CREATE TABLE exercise_sets (...);
CREATE TABLE meal_logs (...);
CREATE TABLE meditation_logs (...);
CREATE TABLE sleep_logs (...);
```

### Migration 4: Health & Notifications
```sql
CREATE TABLE health_metrics (...);
CREATE TABLE health_goals (...);
CREATE TABLE reminders (...);
CREATE TABLE notification_logs (...);
```

---

## Seed Data Requirements

### Essential Seed Data (Phase 1)

**Supplements (Common Stack)**
```dart
final seedSupplements = [
  Supplement(name: 'Vitamin D3', category: vitamin, defaultDoseMg: 5000, unit: 'IU'),
  Supplement(name: 'Magnesium Glycinate', category: mineral, defaultDoseMg: 400),
  Supplement(name: 'Omega-3 Fish Oil', category: omega, defaultDoseMg: 1000),
  Supplement(name: 'Creatine Monohydrate', category: aminoAcid, defaultDoseMg: 5000),
  Supplement(name: 'Vitamin K2', category: vitamin, defaultDoseMg: 100, unit: 'mcg'),
  Supplement(name: 'Zinc', category: mineral, defaultDoseMg: 30),
  Supplement(name: 'Ashwagandha', category: herb, defaultDoseMg: 600),
  Supplement(name: 'L-Theanine', category: aminoAcid, defaultDoseMg: 200),
  Supplement(name: 'Caffeine', category: nootropic, defaultDoseMg: 100),
  Supplement(name: 'B-Complex', category: vitamin, defaultDoseMg: 1, unit: 'capsule'),
];
```

**Exercise Types (Basic Compounds)**
```dart
final seedExercises = [
  ExerciseType(name: 'Barbell Bench Press', category: chest, equipment: barbell, isCompound: true),
  ExerciseType(name: 'Barbell Squat', category: quadriceps, equipment: barbell, isCompound: true),
  ExerciseType(name: 'Deadlift', category: back, equipment: barbell, isCompound: true),
  ExerciseType(name: 'Overhead Press', category: shoulders, equipment: barbell, isCompound: true),
  ExerciseType(name: 'Pull-Up', category: back, equipment: bodyweight, isCompound: true),
  ExerciseType(name: 'Barbell Row', category: back, equipment: barbell, isCompound: true),
  ExerciseType(name: 'Dumbbell Curl', category: biceps, equipment: dumbbell),
  ExerciseType(name: 'Tricep Pushdown', category: triceps, equipment: cable),
  ExerciseType(name: 'Leg Press', category: quadriceps, equipment: machine, isCompound: true),
  ExerciseType(name: 'Lat Pulldown', category: back, equipment: cable),
];
```

**Default Habits**
```dart
final seedHabits = [
  Habit(title: 'Wake up on time', category: morning, type: boolean),
  Habit(title: 'Morning workout', category: fitness, type: boolean),
  Habit(title: 'Drink 8 glasses of water', category: health, type: counter, targetCount: 8),
  Habit(title: 'Read for 30 minutes', category: learning, type: duration, targetMinutes: 30),
  Habit(title: 'Meditate', category: mindfulness, type: duration, targetMinutes: 10),
  Habit(title: 'Take supplements', category: health, type: boolean),
  Habit(title: 'Journal', category: mindfulness, type: boolean),
  Habit(title: 'No phone before bed', category: sleep, type: boolean),
];
```

---

## Next Steps

1. **Review this document** - Are there fields missing? Too many fields?
2. **Prioritize which models** - Which do you need first for your experiment?
3. **Seed data** - What default supplements, exercises, sessions should exist?
4. **Migration strategy** - How to upgrade existing database schema?
5. **API contracts** - If syncing with backend, what endpoints needed?
6. **Content creation** - How will meditation sessions be created/imported?

---

*Document created: 2026-01-09*  
*Last updated: 2026-01-10*  
*Architecture: MVVM with Riverpod (migrated from Provider)*  
*Status: COMPREHENSIVE - All models defined with tables, file mapping, and implementation plan*
